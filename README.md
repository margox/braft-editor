# Braft Editor

### ä¸€ä¸ªåŸºäº[draft-js](https://draftjs.org/)çš„Webå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œé€‚ç”¨äºReactæ¡†æ¶ï¼Œå…¼å®¹ä¸»æµç°ä»£æµè§ˆå™¨ã€‚

#### ç°å·²æ”¯æŒåœ¨typescriptï¼Œä½¿ç”¨npmæˆ–è€…yarnå®‰è£…@types/braft-editorå³å¯,å¢™è£‚æ„Ÿè°¢[@petitspois](https://github.com/petitspois)æä¾›æ”¯æŒ

## æœ€è¿‘æ›´æ–°
- 2018-02-23 v1.4.1
  - ä¿®å¤åœ¨Ant.Designä¸­ä¼šå¯¼è‡´è¡¨å•éæ­£å¸¸æäº¤çš„é—®é¢˜ï¼Œæ„Ÿè°¢[@tgy9310](https://github.com/tgy931)æäº¤çš„PR
- 2018-02-22 v1.4.0
  - å°è¯•ä¿®å¤è‡ªå®šä¹‰å¼¹çª—(extendControls/modal)å†…å®¹æ— æ³•åŠ¨æ€æ›´æ–°çš„é—®é¢˜(æ„Ÿè°¢[@SadCreeper](https://github.com/SadCreeper)åé¦ˆ)
  - ä¿®å¤ä»£ç å—è½¬æ¢å‡ºé”™çš„é—®é¢˜(æ„Ÿè°¢[@SadCreeper](https://github.com/SadCreeper)åé¦ˆ)
- 2018-02-02 v1.3.2
  - æ–°å¢ç¹ä½“ä¸­æ–‡è¯­è¨€[zh-hant]ï¼Œæ„Ÿè°¢[@JackLam](https://github.com/lamjack)çš„è´¡çŒ®
- 2018-02-02 v1.3.1
  - æ–°å¢disabledå±æ€§ï¼Œç”¨ä»¥ç¦ç”¨ç¼–è¾‘åŠŸèƒ½
- 2018-01-30 v1.3.0
  - æ”¯æŒç¼–è¾‘ä»£ç å—æ—¶æŒ‰tabæ’å…¥ç¼©è¿›ï¼Œå¹¶å¯é…ç½®ç¼©è¿›ç©ºæ ¼æ•°(æ„Ÿè°¢[@atmjs](https://github.com/atmjs)å»ºè®®)
  - æ”¯æŒåˆ—è¡¨é¡¹ç›®çš„æ–‡å­—å±…ä¸­\å±…å³æ˜¾ç¤º(æ„Ÿè°¢[@ug1989](https://github.com/ug1989)åé¦ˆ)
  - ä¿®å¤åª’ä½“åº“æ‹–æ”¾ä¸Šä¼ åŠŸèƒ½å¼‚å¸¸çš„é—®é¢˜(æ„Ÿè°¢[@jane900618](https://github.com/jane900618)åé¦ˆ)
  - éƒ¨åˆ†ç»†èŠ‚ä¼˜åŒ–

[æŸ¥çœ‹æ›´æ–°å†å²](https://github.com/margox/braft-editor/blob/master/CHANGELOG.md)

## åœ¨çº¿æ¼”ç¤º
ç§»æ­¥: [http://margox.github.io/braft-editor/](http://margox.github.io/braft-editor/)

## ç‰¹æ€§
- å®Œå–„çš„æ–‡æœ¬å†…å®¹ç¼–è¾‘åŠŸèƒ½
- è¯¸å¤šå¼€æ”¾çš„ç¼–è¾‘æ¥å£ï¼Œè‰¯å¥½çš„å¯æ‰©å±•æ€§
- å…è®¸æ’å…¥å›¾ç‰‡ã€éŸ³è§†é¢‘ç­‰å¤šåª’ä½“å†…å®¹
- å…è®¸è‡ªå®šä¹‰å¤šåª’ä½“å†…å®¹çš„ä¸Šä¼ æ¥å£
- å…è®¸è®¾ç½®å›¾ç‰‡çš„å·¦å³æµ®åŠ¨ï¼ˆå³æ–‡å­—ç»•æ’åŠŸèƒ½ï¼‰
- å…è®¸è®¾ç½®ç¼–è¾‘å™¨å¯ç”¨çš„é¢œè‰²åˆ—è¡¨ã€å­—å·ä»¥åŠå­—ä½“
- å…è®¸è‡ªå®šä¹‰éœ€è¦å±•ç¤ºçš„æ§åˆ¶æŒ‰é’®å’Œå±•ç¤ºé¡ºåº
- å…è®¸å¢åŠ é¢å¤–çš„è‡ªå®šä¹‰æŒ‰é’®
- å¤šè¯­è¨€æ”¯æŒï¼ˆç›®å‰å·²æ”¯æŒç®€ä½“ä¸­æ–‡ã€ç¹ä½“ä¸­æ–‡å’Œè‹±æ–‡ï¼‰
- ...æ›´å¤šç‰¹æ€§å¼€å‘ä¸­

## å®‰è£…
```bash
# ä½¿ç”¨yarnå®‰è£…
yarn add braft-editor
# ä½¿ç”¨npmå®‰è£…
npm install braft-editor --save
```

## å¼€å‘ç¯å¢ƒ
```bash
# è¿è¡Œdev-server
yarn start
# å¯åŠ¨ä¸Šä¼ æœåŠ¡å™¨
cd example/server
node index.js
# è®¿é—® http://localhost:5998

# æ‰“åŒ…ç¼–è¯‘
yarn build
```

## é¸£è°¢
- æ„Ÿè°¢[Jyoti Puri](https://github.com/jpuri) å¼€å‘çš„[draftjs-utils](https://github.com/jpuri/draftjs-utils) æä¾›çš„å¸®åŠ©å’Œ[react-draft-wysiwyg](https://github.com/jpuri/react-draft-wysiwyg) æä¾›çš„å‚è€ƒï¼ŒThanksï¼
- æ„Ÿè°¢[HubSpot](https://github.com/HubSpot) å¼€å‘çš„[draft-convert](https://github.com/hubspot/draft-convert)ï¼ŒThanksï¼

## ä½¿ç”¨ç¤ºä¾‹
```javascript
import React from 'react'
import ReactDOM from 'react-dom'

// å¼•å…¥ç¼–è¾‘å™¨ä»¥åŠç¼–è¾‘å™¨æ ·å¼
import BraftEditor from 'braft-editor'
import 'braft-editor/dist/braft.css'

class Demo extends React.Component {

  state = {
    content: null
  }

  render () {

    const editorProps = {
      height: 500,
      initialContent: this.state.content,
      onChange: this.handleChange,
      onHTMLChange: this.handleHTMLChange
    }

    return (
      <div className="demo">
        <BraftEditor {...editorProps}/>
      </div>
    )

  }

  handleChange = (content) => {
    console.log(content)
  }

  handleHTMLChange = (html) => {
    console.log(html)
  }

}
```

## å¯ç”¨å±æ€§

### contentFormat [string: raw | html]

ç”¨äºæŒ‡å®šinitialContentå’ŒonChangeçš„å†…å®¹æ ¼å¼ï¼Œrawè¡¨ç¤ºä½¿ç”¨ç¼–è¾‘å™¨åŸå§‹æ•°æ®ä½œä¸ºè¾“å…¥å’Œè¾“å‡ºç±»å‹, htmlè¡¨ç¤ºä½¿ç”¨HTMLå­—ç¬¦ä¸²ä½œä¸ºè¾“å…¥å’Œè¾“å‡ºç±»å‹ï¼Œé»˜è®¤ä¸ºrawã€‚
> ä¸ºäº†ä¿è¯å†…å®¹çš„å¯ç¼–è¾‘æ€§ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨rawæ ¼å¼ï¼Œå¹¶é€šè¿‡onHTMLChangeè·å–HTMLæ ¼å¼çš„å†…å®¹


### initialContent [string]

ç¼–è¾‘å™¨çš„åˆå§‹å†…å®¹ï¼Œæ ¹æ®contentFormatç±»å‹ä¼ å…¥htmlå­—ç¬¦ä¸²æˆ–è€…rawå­—ç¬¦ä¸²


### onChange [function(html|raw)]

æŒ‡å®šç¼–è¾‘å™¨å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶å€™çš„å›è°ƒ


### onRawChange [function(raw)]

æŒ‡å®šç¼–è¾‘å™¨å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶å€™çš„å›è°ƒï¼Œå‚æ•°ä¸ºRawæ ¼å¼çš„ç¼–è¾‘å™¨å†…å®¹


### onHTMLChange [function(html)]

æŒ‡å®šç¼–è¾‘å™¨å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶å€™çš„å›è°ƒï¼Œå‚æ•°ä¸ºHTMLæ ¼å¼çš„ç¼–è¾‘å™¨å†…å®¹


### controls [array:[string]]

æŒ‡å®šæ§åˆ¶æ ç»„ä»¶ï¼Œé»˜è®¤å€¼å¦‚ä¸‹ï¼š
```javascript
[
  'undo', 'redo', 'split', 'font-size', 'font-family', 'text-color',
  'bold', 'italic', 'underline', 'strike-through', 'superscript',
  'subscript', 'text-align', 'split', 'headings', 'list_ul', 'list_ol',
  'blockquote', 'code', 'split', 'link', 'split', 'media'
]
```


### extendControls [array:[object]]

æŒ‡å®šè‡ªå®šä¹‰æ§åˆ¶ç»„ä»¶ï¼Œç›®å‰æ”¯æŒåˆ†å‰²çº¿[split]ã€æŒ‰é’®[button]ã€ä¸‹æ‹‰æ¡†[dropdown]å’Œæ¨¡æ€æ¡†[modal]ã€‚ ç¤ºä¾‹ï¼š
```javascript
[
  {
    type: 'split'
  },
  {
    type: 'button',
    text: 'Hello',
    className: 'preview-button',
    onClick: () => console.log('Hello World!')
  }, {
    type: 'dropdown',
    text: 'Foo',
    showDropDownArrow: false,
    component: <YourComponent />
  }, {
    type: 'modal',
    text: 'Bar',
    modal: {
      id: 'test-modal', // v1.4.0æ–°å¢
      title: 'è¿™æ˜¯ä¸€ä¸ªå¼¹å‡ºæ¡†',
      showClose: true,
      showCancel: true,
      showConfirm: true,
      confirmable: true,
      onConfirm: () => console.log(1),
      onCancel: () => console.log(2),
      onClose: () => console.log(3),
      children: (
        <div style={{width: 480, height: 320, padding: 30}}>
          <span>Hello Worldï¼</span>
        </div>
      )
    }
  }
]
```
> ä½¿ç”¨è‡ªå®šä¹‰çš„å¼¹çª—ç»„ä»¶æ—¶ï¼Œå¿…é¡»ä¸ºmodalæŒ‡å®šä¸€ä¸ªidï¼Œä»¥ä¿è¯modalå†…å®¹èƒ½åŠ¨æ€æ›´æ–°

### disabled [boolean]

æ˜¯å¦ç¦ç”¨ç¼–è¾‘åŠŸèƒ½ï¼Œé»˜è®¤false


### height [number]

æŒ‡å®šç¼–è¾‘åŒºåŸŸçš„é«˜åº¦ï¼Œä¸åŒ…æ‹¬æ§åˆ¶æ ï¼Œé»˜è®¤æ˜¯500


### language [string]

æŒ‡å®šç¼–è¾‘å™¨çš„è¯­è¨€ï¼Œç›®å‰æ”¯æŒzhã€zh-hantå’Œenï¼Œé»˜è®¤zh


### placeholder [string]

è®¾ç½®placeholderæ–‡æœ¬


### viewWrapper [string]

æŒ‡å®šç¼–è¾‘å™¨çš„åŒ…è£¹å®¹å™¨çš„é€‰æ‹©å™¨å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚'#wrapper', '.container'ï¼‰ï¼Œç”¨äºä¸‹æ‹‰èœå•ç­‰ç»„ä»¶çš„ä½ç½®è‡ªé€‚åº”ï¼Œé»˜è®¤ä¸ºbody


### tabIndents [number]

æŒ‡å®šç¼–è¾‘å™¨ç¼–è¾‘ä»£ç å—æ—¶æŒ‰ä¸‹tabæ’å…¥çš„ç¼©è¿›ç©ºæ ¼æ•°ï¼Œé»˜è®¤æ˜¯2


### onSave [function]

æŒ‡å®šä¸€ä¸ªå‡½æ•°ï¼Œé€šå¸¸ç”¨äºä¿å­˜æ“ä½œï¼Œåœ¨ç¼–è¾‘å™¨å¤„äºç„¦ç‚¹æ—¶æŒ‰ä¸‹command/ctrl + sä¼šæ‰§è¡Œæ­¤å‡½æ•°


### colors [array:[string]]

æŒ‡å®šç¼–è¾‘å™¨å¯ç”¨çš„é¢œè‰²åˆ—è¡¨ï¼Œç”¨äºè®¾å®šæ–‡æœ¬é¢œè‰²å’Œæ–‡æœ¬èƒŒæ™¯é¢œè‰²ï¼Œåªæ”¯æŒ6ä½16è¿›åˆ¶å†™æ³•ï¼Œé»˜è®¤å¯ç”¨é¢œè‰²ï¼š
```javascript
[
  '#000000', '#333333', '#666666', '#999999', '#cccccc', '#ffffff',
  '#61a951', '#16a085', '#07a9fe', '#003ba5', '#8e44ad', '#f32784',
  '#c0392b', '#d35400', '#f39c12', '#fdda00', '#7f8c8d', '#2c3e50'
]
```


### fontSizes [array:[number]]

æŒ‡å®šç¼–è¾‘å™¨å¯ç”¨çš„å­—å·åˆ—è¡¨ï¼Œç”¨äºè®¾å®šæ–‡æœ¬å†…å®¹çš„å­—å·ï¼Œé»˜è®¤å¯ç”¨å­—å·ï¼š
```javascript
[
  12, 14, 16, 18, 20, 24,
  28, 30, 32, 36, 40, 48,
  56, 64, 72, 96, 120, 144
]
```

### fontFamilies [array:[object]]

æŒ‡å®šç¼–è¾‘å™¨å¯ç”¨çš„å­—ä½“åˆ—è¡¨ï¼Œç”¨äºè®¾å®šæ–‡æœ¬å†…å®¹çš„å­—ä½“ï¼Œé»˜è®¤å¯ç”¨å­—ä½“ï¼š
```javascript
[
  {
    name: 'Araial',
    family: 'Arial, Helvetica, sans-serif'
  }, {
    name: 'Georgia',
    family: 'Georgia, serif'
  }, {
    name: 'Impact',
    family: 'Impact, serif'
  }, {
    name: 'Monospace',
    family: '"Courier New", Courier, monospace'
  }, {
    name: 'Tahoma',
    family: "tahoma, arial, 'Hiragino Sans GB', å®‹ä½“, sans-serif"
  }
]
```

### emojis [array:[String]]
é…ç½®ç¼–è¾‘å™¨å¯ç”¨çš„è¡¨æƒ…åˆ—è¡¨ï¼Œé»˜è®¤å¯ç”¨è¡¨æƒ…ï¼š
```javascript
[
  "ğŸ¤£","ğŸ™Œ","ğŸ’š","ğŸ’›","ğŸ‘","ğŸ˜‰","ğŸ’¯",
  "ğŸ’•","ğŸ’","ğŸ’˜","ğŸ’™","ğŸ’","ğŸ–¤","ğŸ’œ",
  "â¤ï¸","ğŸ˜","ğŸ˜»","ğŸ’“","ğŸ’—","ğŸ˜‹","ğŸ˜‡",
  "ğŸ˜‚","ğŸ˜¹","ğŸ˜˜","ğŸ’–","ğŸ˜","ğŸ˜€","ğŸ¤",
  "ğŸ˜²","ğŸ˜„","ğŸ˜Š","ğŸ‘","ğŸ˜Œ","ğŸ˜ƒ","ğŸ˜…",
  "âœŒï¸","ğŸ¤—","ğŸ’‹","ğŸ˜—","ğŸ˜½","ğŸ˜š","ğŸ¤ ",
  "ğŸ˜™","ğŸ˜º","ğŸ‘„","ğŸ˜¸","ğŸ˜","ğŸ˜¼","ğŸ‘Œ",
  "ğŸ˜","ğŸ˜†","ğŸ˜›","ğŸ™","ğŸ¤","ğŸ™‚","ğŸ¤‘",
  "ğŸ˜","ğŸ˜","ğŸ˜‘","ğŸ¤¤","ğŸ˜¤","ğŸ™ƒ","ğŸ¤¡",
  "ğŸ˜¶","ğŸ˜ª","ğŸ˜´","ğŸ˜µ","ğŸ˜“","ğŸ‘Š","ğŸ˜¦",
  "ğŸ˜·","ğŸ¤","ğŸ˜œ","ğŸ¤“","ğŸ‘»","ğŸ˜¥","ğŸ™„",
  "ğŸ¤”","ğŸ¤’","ğŸ™","ğŸ˜”","ğŸ˜¯","â˜¹ï¸","â˜ ï¸",
  "ğŸ˜°","ğŸ˜©","ğŸ˜–","ğŸ˜•","ğŸ˜’","ğŸ˜£","ğŸ˜¢",
  "ğŸ˜®","ğŸ˜¿","ğŸ¤§","ğŸ˜«","ğŸ¤¥","ğŸ˜","ğŸ˜¬",
  "ğŸ‘","ğŸ’€","ğŸ˜³","ğŸ˜¨","ğŸ¤•","ğŸ¤¢","ğŸ˜±",
  "ğŸ˜­","ğŸ˜ ","ğŸ˜ˆ","ğŸ˜§","ğŸ’”","ğŸ˜Ÿ","ğŸ™€",
  "ğŸ’©","ğŸ‘¿","ğŸ˜¡","ğŸ˜¾","ğŸ–•"
]
```
> æ­¤é»˜è®¤åˆ—è¡¨ä¸ä¿è¯å…¨å¹³å°æ­£å¸¸æ˜¾ç¤ºï¼Œè¯·æŒ‰éœ€è°ƒæ•´

### pasteMode ['text' | '']
æŒ‡å®šç²˜è´´æ¨¡å¼ï¼Œå¦‚æœä¸ºtextï¼Œåˆ™ç²˜è´´çš„æ—¶å€™ä¼šè¿‡æ»¤æ‰HTMLæ ¼å¼ï¼Œé»˜è®¤ä¸ºç©º

### media [object]

é…ç½®ç¼–è¾‘å™¨çš„å¤šåª’ä½“æ’å…¥åŠŸèƒ½:
```javascript
{
  image: true, // å¼€å¯å›¾ç‰‡æ’å…¥åŠŸèƒ½
  video: true, // å¼€å¯è§†é¢‘æ’å…¥åŠŸèƒ½
  audio: true, // å¼€å¯éŸ³é¢‘æ’å…¥åŠŸèƒ½
  validateFn: null, // æŒ‡å®šæœ¬åœ°æ ¡éªŒå‡½æ•°ï¼Œè¯´æ˜è§ä¸‹æ–‡
  uploadFn: null // æŒ‡å®šä¸Šä¼ å‡½æ•°ï¼Œè¯´æ˜è§ä¸‹æ–‡
}
```
#### media.validateFn [function]

åœ¨é€‰æ‹©æ–‡ä»¶ä¹‹åï¼Œç¼–è¾‘å™¨ä¼šè°ƒç”¨æ­¤å‡½æ•°å¯¹æ¯ä¸€ä¸ªé€‰æ‹©çš„æ–‡ä»¶è¿›è¡Œæ ¡éªŒï¼Œå¦‚æœè¯¥å‡½æ•°è¿”å›falseï¼Œåˆ™å¯¹åº”çš„æ–‡ä»¶ä¸ä¼šè¢«æ·»åŠ åˆ°åª’ä½“åº“ï¼š
```javascript
// ç¤ºä¾‹ï¼Œä¸å…è®¸é€‰æ‹©å¤§äº100Kçš„æ–‡ä»¶
const validateFn = (file) => {
  return file.size < 1024 * 100
}
```

#### media.uploadFn [function]

æŒ‡å®šä¸Šä¼ å‡½æ•°ï¼ŒæœªæŒ‡å®šæ—¶æ— æ³•ä¸Šä¼ è§†é¢‘å’ŒéŸ³é¢‘ï¼Œå¯ä¸Šä¼ å›¾ç‰‡ï¼Œä½†åªé™æœ¬åœ°é¢„è§ˆã€‚

#### media.uploadFn:param [object]

ç¼–è¾‘å™¨åœ¨è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œä¼šä¼ å…¥ä¸€ä¸ªåŒ…å«æ–‡ä»¶ä½“ã€æ–‡ä»¶åœ¨åª’ä½“åº“çš„IDã€è¿›åº¦å›è°ƒã€æˆåŠŸå›è°ƒå’Œå¤±è´¥å›è°ƒçš„å¯¹è±¡ä½œä¸ºå‚æ•°ï¼š
```javascript
{
  file: [File Object],
  progress: function (progress) {
    // progressä¸º0åˆ°100
  },
  libraryId: 'XXXXX',
  success: function (res) {
    // resé¡»ä¸ºä¸€ä¸ªåŒ…å«å·²ä¸Šä¼ æ–‡ä»¶urlå±æ€§çš„å¯¹è±¡ï¼š
  },
  error: function (err) {

  }
}
```

uploadFnç¤ºä¾‹:
```javascript
const uploadFn = (param) => {

  const serverURL = 'http://upload-server'
  const xhr = new XMLHttpRequest
  const fd = new FormData()

  // libraryIdå¯ç”¨äºé€šè¿‡mediaLibraryç¤ºä¾‹æ¥æ“ä½œå¯¹åº”çš„åª’ä½“å†…å®¹
  console.log(param.libraryId)

  const successFn = (response) => {
    // å‡è®¾æœåŠ¡ç«¯ç›´æ¥è¿”å›æ–‡ä»¶ä¸Šä¼ åçš„åœ°å€
    // ä¸Šä¼ æˆåŠŸåè°ƒç”¨param.successå¹¶ä¼ å…¥ä¸Šä¼ åçš„æ–‡ä»¶åœ°å€
    param.success({
      url: xhr.responseText
    })
  }

  const progressFn = (event) => {
    // ä¸Šä¼ è¿›åº¦å‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨param.progress
    param.progress(event.loaded / event.total * 100)
  }

  const errorFn = (response) => {
    // ä¸Šä¼ å‘ç”Ÿé”™è¯¯æ—¶è°ƒç”¨param.error
    param.error({
      msg: 'unable to upload.'
    })
  }

  xhr.upload.addEventListener("progress", progressFn, false)
  xhr.addEventListener("load", successFn, false)
  xhr.addEventListener("error", errorFn, false)
  xhr.addEventListener("abort", errorFn, false)

  fd.append('file', param.file)
  xhr.open('POST', serverURL, true)
  xhr.send(fd)

}
```

#### media.externalMedias [object]
é…ç½®ç¼–è¾‘å™¨å¯æ’å…¥çš„å¤–éƒ¨ç½‘ç»œåª’ä½“ç±»å‹ï¼Œé»˜è®¤å€¼å¦‚ä¸‹ï¼š
```javascript
{
  image: true,
  audio: true,
  video: true
}
// å¦‚æœä»¥ä¸Šä¸‰ä¸ªå€¼çš†ä¸ºfalseï¼Œåˆ™ä¸å…è®¸æ’å…¥ä»»ä½•å¤–éƒ¨åª’ä½“ï¼Œä¹Ÿä¸ä¼šæ˜¾ç¤ºæ’å…¥å¤–éƒ¨åª’ä½“çš„å…¥å£
```

#### imageControls [object]
é…ç½®å›¾ç‰‡å·¥å…·æ (tooltip)å¯ç”¨çš„æŒ‰é’®ï¼Œé»˜è®¤å€¼å¦‚ä¸‹ï¼š
```javascript
{
  floatLeft: true,
  floatRight: true,
  alignLeft: true,
  alignCenter: true,
  alignRight: true,
  link: true
}
```

## å®ä¾‹æ–¹æ³•
> ç»å¤§å¤šæ•°çš„égetç±»æ–¹æ³•éƒ½ä¼šè¿”å›ç¼–è¾‘å™¨å®ä¾‹ï¼Œå³æ”¯æŒé“¾å¼è°ƒç”¨


### è·å–å®ä¾‹
```javascript
<BraftEditor ref={instance => this.editorInstance = instance}/>
```

### getContent(?format):HTMLContent | RawContent
```javascript
// è·å–æŒ‡å®šæ ¼å¼çš„å†…å®¹ï¼Œformatä¸ºè·å–å†…å®¹çš„æ ¼å¼ï¼Œé»˜è®¤ä¸contentFormatä¸€è‡´ï¼Œ å¦æœ‰getHTMLContentå’ŒgetRawContentæ–¹æ³•å¯ç”¨
this.editorInstance.getContent(format)
```

### setContent(HTMLContent | RawContent, ?format):editorInstance
```javascript
// è®¾ç½®ç¼–è¾‘å™¨å†…å®¹ï¼Œç”¨äºéœ€è¦å¼‚æ­¥å¡«å…¥ç¼–è¾‘å™¨å†…å®¹çš„åœºæ™¯ï¼Œformatä¸ºå¡«å…¥å†…å®¹çš„æ ¼å¼ï¼Œé»˜è®¤ä¸contentFormatä¸€è‡´
this.editorInstance.setContent(content, format)
```

### getEditorState():editorState
è·å–ç¼–è¾‘å™¨å®ä¾‹çš„editorStateï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ— éœ€ä½¿ç”¨
```javascript
this.editorInstance.getEditorState()
```

### forceRender():editorInstance
å¼ºåˆ¶ç¼–è¾‘å™¨å†…å®¹é‡æ–°æ¸²æŸ“ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ— éœ€ä½¿ç”¨
```javascript
this.editorInstance.forceRender()
```

### getDraftInstance():draftInstance
è·å–draftå†…æ ¸çš„å®ä¾‹ï¼Œç”¨äºè°ƒç”¨draftçš„API
```javascript
const draftInstance = this.editorInstance.getDraftInstance()
// ä½¿ç¼–è¾‘å™¨è·å¾—ç„¦ç‚¹
draftInstance.focus()
```
> æ›´å¤šå…³äºdraftçš„èµ„æ–™ï¼Œè¯·å‚é˜…ï¼šhttps://draftjs.org/

### getMediaLibraryInstance():mediaLibraryInstance
è·å–å†…ç½®åª’ä½“åº“å®ä¾‹ï¼Œå¯ç”¨äºå¤–éƒ¨æ“ä½œåª’ä½“åº“å†…å®¹
```javascript
// ç¤ºä¾‹
const mediaLibrary = this.editorInstance.getMediaLibraryInstance()
const libraryId = new Date().getTime()
// å¾€åª’ä½“åº“æ·»åŠ ä¸€ä¸ªå›¾ç‰‡
mediaLibrary.addItem({
  id: libraryId,
  type: 'IMAGE',
  name: 'Foo',
  url: 'http://path/to/image',
  thumbnail: 'http://path/to/thumbnail'
})
// ä»åª’ä½“åº“åˆ é™¤å…ˆå‰æ’å…¥çš„å›¾ç‰‡
setTimeout(() => {
  mediaLibrary.removeItem(libraryId)
}, 1000)
```
> åª’ä½“åº“å®ä¾‹çš„å…·ä½“ä½¿ç”¨è¯·å‚é˜…ï¼šhttps://github.com/margox/braft-editor/tree/master/src/helpers/MediaLibrary/index.js

### selectionCollapsed():Boolean
åˆ¤æ–­å½“å‰æ˜¯å¦é€‰ä¸­å†…å®¹
```javascript
this.editorInstance.selectionCollapsed()
```

### getSelectionBlockType():String
è·å–é€‰ä¸­å†…å®¹çš„åŒºå—ç±»å‹
```javascript
this.editorInstance.getSelectionBlockType()
```

### toggleSelectionBlockType():editorInstance
åˆ‡æ¢é€‰ä¸­å†…å®¹çš„åŒºå—ç±»å‹ï¼Œå¯ç”¨çš„åŒºå—ç±»å‹è¯·å‚è§[å¯ç”¨åŒºå—ç±»å‹](#å¯ç”¨åŒºå—ç±»å‹)
```javascript
this.editorInstance.toggleSelectionBlockType('blockquote')
```

### getSelectionInlineStyle():DraftInlineStyle
è·å–é€‰ä¸­å†…å®¹çš„è¡Œå†…æ ·å¼
```javascript
this.editorInstance.getSelectionInlineStyle()
```

### selectionHasInlineStyle():Boolean
åˆ¤æ–­é€‰ä¸­å†…å®¹æ˜¯å¦åŒ…å«æŒ‡å®šçš„è¡Œå†…æ ·å¼
```javascript
this.editorInstance.selectionHasInlineStyle('BOLD')
```

### toggleSelectionInlineStyle(style:String, ?stylesToBeRemoved:Array):editorInstance
åˆ‡æ¢é€‰ä¸­å†…å®¹çš„è¡Œå†…æ ·å¼, åŒæ—¶å¯ä¼ å…¥ä¸€ä¸ªéœ€è¦ç§»é™¤çš„æ ·å¼æ•°ç»„
```javascript
// åŠ ç²—æ–‡å­—ï¼ŒåŒæ—¶ç§»é™¤æ–‡å­—æ–œä½“æ ·å¼
this.editorInstance.toggleSelectionInlineStyle('BOLD', ['ITALIC'])
```

### toggleSelectionAlignment(alignment):editorInstance
åˆ‡æ¢é€‰ä¸­å†…å®¹çš„æ–‡æœ¬å¯¹é½æ–¹å¼ï¼Œå‚æ•°å¯ä»¥æ˜¯left/center/right
```javascript
this.editorInstance.toggleSelectionAlignment('center')
```

### toggleSelectionColor(hexColor:String):editorInstance
åˆ‡æ¢é€‰ä¸­å†…å®¹çš„æ–‡å­—é¢œè‰²ï¼Œå‚æ•°ä¸ºå¯ç”¨é¢œè‰²ä¸­çš„ä¸€ä¸ª
```javascript
this.editorInstance.toggleSelectionColor('#ffffff')
```

### toggleSelectionBackgroundColor(hexColor:String):editorInstance
åˆ‡æ¢é€‰ä¸­å†…å®¹çš„æ–‡å­—èƒŒæ™¯é¢œè‰²ï¼Œå‚æ•°ä¸ºå¯ç”¨é¢œè‰²ä¸­çš„ä¸€ä¸ª
```javascript
this.editorInstance.toggleSelectionBackgroundColor('#000000')
```

### toggleSelectionFontSize(fontSize:Number):editorInstance
åˆ‡æ¢é€‰ä¸­å†…å®¹çš„æ–‡å­—å¤§å°ï¼Œå‚æ•°ä¸ºå¯ç”¨å­—å·ä¸­çš„ä¸€ä¸ª
```javascript
this.editorInstance.toggleSelectionFontSize(24)
```

### toggleSelectionFontFamily(fontFamily:String):editorInstance
åˆ‡æ¢é€‰ä¸­å†…å®¹çš„æ–‡å­—å­—ä½“ï¼Œå‚æ•°ä¸ºå¯ç”¨å­—ä½“ä¸­çš„ä¸€ä¸ª(name)
```javascript
this.editorInstance.toggleSelectionFontFamily('Impact')
```

### toggleSelectionLink(href:String, target:String):editorInstance
ä¸ºé€‰ä¸­å†…å®¹æ·»åŠ è¶…é“¾æ¥
```javascript
this.editorInstance.toggleSelectionLink('http://www.baidu.com', '_blank')
// ç§»é™¤æ‰€é€‰å†…å®¹çš„è¶…é“¾æ¥
this.editorInstance.toggleSelectionLink(false)
```

### insertText(text:String, replace:Boolean):editorInstance
æ’å…¥å†…å®¹åˆ°å…‰æ ‡ä¹‹åï¼Œå¦‚æœå½“å‰å·²é€‰ä¸­å†…å®¹å¹¶ä¸”replaceä¸ºtrueï¼Œåˆ™ä¼šæ›¿æ¢è¢«é€‰ä¸­å†…å®¹ï¼Œreplaceé»˜è®¤ä¸ºtrue
```javascript
this.editorInstance.insertText('Hello World!')
```

### insertMedias(medias:Array):editorInstance
æ’å…¥åª’ä½“å†…å®¹åˆ°ç¼–è¾‘å™¨ï¼Œmediasä¸ºæ•°ç»„ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š
```javascript
this.editorInstance.insertMedias([
  {
    type: 'IMAGE',
    name: 'New Photo',
    url: 'http://path/to/image.png'
  }, {
    type: 'VIDEO',
    name: 'New Video',
    url: 'http://path/to/image-2.mp4'
  }, {
    type: 'AUDIO',
    name: 'New Audio',
    url: 'http://path/to/image-2.mp3'
  }
])
```

### undo():editorInstance
æ’é”€ä¸€æ¬¡æ“ä½œ
```javascript
this.editorInstance.undo()
```

### redo():editorInstance
é‡åšä¸€æ¬¡æ“ä½œ
```javascript
this.editorInstance.redo()
```

### focus():editorInstance
ä½¿ç¼–è¾‘å™¨è·å¾—ç„¦ç‚¹
```javascript
this.editorInstance.focus()
```

### blur():editorInstance
ä½¿ç¼–è¾‘å™¨å¤±å»ç„¦ç‚¹
```javascript
this.editorInstance.blur()
```

## å¼€å‘è®¡åˆ’
- æ”¯æŒå›¾ç‰‡ä¿®æ”¹å®½åº¦
- æ”¯æŒå¤šå®ä¾‹å…±å­˜

## å·²çŸ¥é—®é¢˜
1. ä½¿ç”¨htmlä½œä¸ºcontentFormatæ—¶ï¼Œæ–‡å­—å­—ä½“(fontFamily)çš„çš„è½¬æ¢éš¾ä»¥å®ç°
2. ä»å¤–éƒ¨å¤åˆ¶HTMLå†…å®¹ç²˜è´´åˆ°ç¼–è¾‘å™¨æ—¶ï¼Œæ–‡å­—å­—ä½“(fontFamily)çš„è¯†åˆ«éš¾ä»¥å®ç°
3. ç¼–è¾‘å™¨å†…å®¹ä¸ºç©ºæ—¶æ’å…¥åˆ—è¡¨ï¼Œplaceholderæ–‡æœ¬ä¸æ¶ˆå¤±ï¼Œè¾“å…¥ä»»æ„æ–‡æœ¬å†…å®¹åplaceholderæ–‡æœ¬æ¶ˆå¤±

## é™„å½•

### å¯ç”¨åŒºå—ç±»å‹
```javascript
[
  'header-one',
  'header-two',
  'header-three',
  'header-four',
  'header-five',
  'header-six',
  'unstyled',
  'blockquote',
  'code-block',
  'unordered-list-item',
  'ordered-list-item'
]
```
