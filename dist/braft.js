!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("react"),require("draft-js"),require("draftjs-utils"),require("react-dom"),require("draft-convert"));else if("function"==typeof define&&define.amd)define(["react","draft-js","draftjs-utils","react-dom","draft-convert"],e);else{var n="object"==typeof exports?e(require("react"),require("draft-js"),require("draftjs-utils"),require("react-dom"),require("draft-convert")):e(t.react,t["draft-js"],t["draftjs-utils"],t["react-dom"],t["draft-convert"]);for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(this,function(t,e,n,r,i){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=47)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){try{(function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.UniqueIndex=function(){return isNaN(window.__BRAFT_UNIQUE_INDEX__)?window.__BRAFT_UNIQUE_INDEX__=1:window.__BRAFT_UNIQUE_INDEX__+=1,window.__BRAFT_UNIQUE_INDEX__},e.isPromise=function(e){return!!e&&("object"===(void 0===e?"undefined":t(e))||"function"==typeof e)&&"function"==typeof e.then},e.rgbToHex=function(t){if(0===t.indexOf("#"))return t;var e=t.split(",");return e.length<3?t:"#"+[e[0],e[1],e[2]].map(function(t){var e=parseInt(t.replace(/\D/g,""),10).toString(16);return 1===e.length?"0"+e:e}).join("")},e.imageToURL=function(t){setTimeout(function(){t.onSuccess({url:URL.createObjectURL(t.file),name:t.file.name})},1e3)}}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(29);var u=n(0),l=t(u),s=n(46),c=t(s),f=n(2),h=function(t){function e(){var t,n,o,a;r(this,e);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=o=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(l))),o.alive=!1,o.responsiveResolveId=null,o.dropDownHandlerElement=null,o.dropDownContentElement=null,o.componentId=o.props.componentId||"BRAFT-DROPDOWN-"+(0,f.UniqueIndex)(),o.state={active:!1,offset:0},a=n,i(o,a)}return o(e,t),a(e,[{key:"componentDidMount",value:function(){var t=this;this.alive=!0,this.fixDropDownPosition(),document.body.addEventListener("click",function(e){t.registerClickEvent(e)}),this.responsiveResolveId=c.default.resolve(function(){t.fixDropDownPosition()})}},{key:"componentWillReceiveProps",value:function(t){!this.props.disabled&&t.disabled&&this.hide()}},{key:"componentWillUnmount",value:function(){var t=this;document.body.removeEventListener("click",function(e){t.registerClickEvent(e)}),this.alive=!1,c.default.unresolve(this.responsiveResolveId)}},{key:"render",value:function(){var t=this,e=this.state,n=e.active,r=e.offset,i=this.props,o=i.caption,a=i.hoverTitle,u=i.disabled,s=i.showDropDownArrow,c=i.arrowActive,f=i.className,h=i.children;return u&&(n=!1),l.default.createElement("div",{id:this.componentId,className:"Braft-dropdown "+(n?"active ":"")+(u?"disabled ":"")+f},l.default.createElement("button",{className:"dropdown-handler",title:a,"data-braft-component-id":this.componentId,ref:function(e){return t.dropDownHandlerElement=e}},l.default.createElement("span",null,o),!1!==s&&l.default.createElement("i",{className:"icon-drop-down"})),l.default.createElement("div",{className:"dropdown-content",style:{marginLeft:r+"px"},ref:function(e){return t.dropDownContentElement=e}},l.default.createElement("i",{style:{marginLeft:-1*r},className:"dropdown-arrow"+(c?" active":"")}),h))}},{key:"fixDropDownPosition",value:function(){var t=0,e=null;e=this.props.viewWrapper?document.querySelector(this.props.viewWrapper).getBoundingClientRect():document.body.getBoundingClientRect();var n=this.dropDownHandlerElement.getBoundingClientRect(),r=this.dropDownContentElement.getBoundingClientRect(),i=n.right-n.width/2+r.width/2,o=n.left+n.width/2-r.width/2;i=e.right-i,o-=e.left,i<10?t=i-10:o<10&&(t=-1*o+10),t!==this.state.offset&&this.setState({offset:t})}},{key:"registerClickEvent",value:function(t){var e=this.props.hideOnBlur,n=!1;t.target.dataset.braftComponentId===this.componentId?n=!!t.target.dataset.keepActive||!this.state.active:!1===e&&(n=this.state.active),this.alive&&this.setState({active:n})}},{key:"show",value:function(){this.setState({active:!0})}},{key:"hide",value:function(){this.setState({active:!1})}}]),e}(l.default.Component);e.default=h}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.removeBlock=e.selectNextBlock=e.selectBlock=e.checkReturn=void 0;var t=n(1),r=n(20),i=(function(t){t&&t.__esModule}(r),e.checkReturn=function(e,n){var r=e.getCurrentContent(),i=e.getSelection().getAnchorKey();if(i){var o=r.getBlockForKey(i),a=o.getType().toLowerCase();return("unordered-list-item"===a||"ordered-list-item"===a)&&(0===o.getLength()&&t.RichUtils.toggleBlockType(e,"unstyled"))}return!1},e.selectBlock=function(e,n){var r=n.getKey(),i=new t.SelectionState({anchorKey:r,anchorOffset:0,focusKey:r,focusOffset:n.getLength()});return t.EditorState.forceSelection(e,i)});e.selectNextBlock=function(t,e){var n=t.getCurrentContent().getBlockAfter(e);return n?i(t,n):t},e.removeBlock=function(e,n){var r=e.getCurrentContent(),i=n.getKey(),o=new t.SelectionState({anchorKey:i,anchorOffset:0,focusKey:i,focusOffset:n.getLength()}),a=t.Modifier.removeRange(r,o,"backward"),u=t.Modifier.setBlockType(a,a.getSelectionAfter(),"unstyled");return t.EditorState.forceSelection(t.EditorState.push(e,u,"remove-range"),u.getSelectionAfter())}}).call(this)}finally{}},function(t,e,n){function r(t,e){this._id=t,this._clearFn=e}var i=Function.prototype.apply;e.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(58),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e){t.exports=n},function(t,e){t.exports=r},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function e(t){return o(t)?t:T(t)}function n(t){return a(t)?t:M(t)}function r(t){return u(t)?t:j(t)}function i(t){return o(t)&&!l(t)?t:z(t)}function o(t){return!(!t||!t[sn])}function a(t){return!(!t||!t[cn])}function u(t){return!(!t||!t[fn])}function l(t){return a(t)||u(t)}function s(t){return!(!t||!t[hn])}function c(t){return t.value=!1,t}function f(t){t&&(t.value=!0)}function h(){}function p(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;i<n;i++)r[i]=t[i+e];return r}function d(t){return void 0===t.size&&(t.size=t.__iterate(y)),t.size}function m(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?d(t)+e:e}function y(){return!0}function v(t,e,n){return(0===t||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function _(t,e){return b(t,e,0)}function g(t,e){return b(t,e,e)}function b(t,e,n){return void 0===t?n:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}function w(t){this.next=t}function E(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function S(){return{value:void 0,done:!0}}function k(t){return!!C(t)}function I(t){return t&&"function"==typeof t.next}function O(t){var e=C(t);return e&&e.call(t)}function C(t){var e=t&&(En&&t[En]||t[Sn]);if("function"==typeof e)return e}function x(t){return t&&"number"==typeof t.length}function T(t){return null===t||void 0===t?R():o(t)?t.toSeq():U(t)}function M(t){return null===t||void 0===t?R().toKeyedSeq():o(t)?a(t)?t.toSeq():t.fromEntrySeq():q(t)}function j(t){return null===t||void 0===t?R():o(t)?a(t)?t.entrySeq():t.toIndexedSeq():F(t)}function z(t){return(null===t||void 0===t?R():o(t)?a(t)?t.entrySeq():t:F(t)).toSetSeq()}function D(t){this._array=t,this.size=t.length}function P(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function N(t){this._iterable=t,this.size=t.length||t.size}function A(t){this._iterator=t,this._iteratorCache=[]}function L(t){return!(!t||!t[In])}function R(){return On||(On=new D([]))}function q(t){var e=Array.isArray(t)?new D(t).fromEntrySeq():I(t)?new A(t).fromEntrySeq():k(t)?new N(t).fromEntrySeq():"object"==typeof t?new P(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function F(t){var e=B(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function U(t){var e=B(t)||"object"==typeof t&&new P(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function B(t){return x(t)?new D(t):I(t)?new A(t):k(t)?new N(t):void 0}function K(t,e,n,r){var i=t._cache;if(i){for(var o=i.length-1,a=0;a<=o;a++){var u=i[n?o-a:a];if(!1===e(u[1],r?u[0]:a,t))return a+1}return a}return t.__iterateUncached(e,n)}function W(t,e,n,r){var i=t._cache;if(i){var o=i.length-1,a=0;return new w(function(){var t=i[n?o-a:a];return a++>o?S():E(e,r?t[0]:a-1,t[1])})}return t.__iteratorUncached(e,n)}function H(t,e){return e?V(e,t,"",{"":t}):G(t)}function V(t,e,n,r){return Array.isArray(e)?t.call(r,n,j(e).map(function(n,r){return V(t,n,r,e)})):J(e)?t.call(r,n,M(e).map(function(n,r){return V(t,n,r,e)})):e}function G(t){return Array.isArray(t)?j(t).map(G).toList():J(t)?M(t).map(G).toMap():t}function J(t){return t&&(t.constructor===Object||void 0===t.constructor)}function Q(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function Y(t,e){if(t===e)return!0;if(!o(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||a(t)!==a(e)||u(t)!==u(e)||s(t)!==s(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!l(t);if(s(t)){var r=t.entries();return e.every(function(t,e){var i=r.next().value;return i&&Q(i[1],t)&&(n||Q(i[0],e))})&&r.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var c=t;t=e,e=c}var f=!0,h=e.__iterate(function(e,r){if(n?!t.has(e):i?!Q(e,t.get(r,yn)):!Q(t.get(r,yn),e))return f=!1,!1});return f&&t.size===h}function X(t,e){if(!(this instanceof X))return new X(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(Cn)return Cn;Cn=this}}function Z(t,e){if(!t)throw new Error(e)}function $(t,e,n){if(!(this instanceof $))return new $(t,e,n);if(Z(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),e<t&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if(xn)return xn;xn=this}}function tt(){throw TypeError("Abstract")}function et(){}function nt(){}function rt(){}function it(t){return t>>>1&1073741824|3221225471&t}function ot(t){if(!1===t||null===t||void 0===t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null===t||void 0===t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){var n=0|t;for(n!==t&&(n^=4294967295*t);t>4294967295;)t/=4294967295,n^=t;return it(n)}if("string"===e)return t.length>An?at(t):ut(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return lt(t);if("function"==typeof t.toString)return ut(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function at(t){var e=qn[t];return void 0===e&&(e=ut(t),Rn===Ln&&(Rn=0,qn={}),Rn++,qn[t]=e),e}function ut(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return it(e)}function lt(t){var e;if(Dn&&void 0!==(e=Tn.get(t)))return e;if(void 0!==(e=t[Nn]))return e;if(!zn){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Nn]))return e;if(void 0!==(e=st(t)))return e}if(e=++Pn,1073741824&Pn&&(Pn=0),Dn)Tn.set(t,e);else{if(void 0!==jn&&!1===jn(t))throw new Error("Non-extensible objects are not allowed as keys.");if(zn)Object.defineProperty(t,Nn,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Nn]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Nn]=e}}return e}function st(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function ct(t){Z(t!==1/0,"Cannot perform this action with an infinite size.")}function ft(t){return null===t||void 0===t?Et():ht(t)&&!s(t)?t:Et().withMutations(function(e){var r=n(t);ct(r.size),r.forEach(function(t,n){return e.set(n,t)})})}function ht(t){return!(!t||!t[Fn])}function pt(t,e){this.ownerID=t,this.entries=e}function dt(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function mt(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function yt(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function vt(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function _t(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&bt(t._root)}function gt(t,e){return E(t,e[0],e[1])}function bt(t,e){return{node:t,index:0,__prev:e}}function wt(t,e,n,r){var i=Object.create(Un);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Et(){return Bn||(Bn=wt(0))}function St(t,e,n){var r,i;if(t._root){var o=c(vn),a=c(_n);if(r=kt(t._root,t.__ownerID,0,void 0,e,n,o,a),!a.value)return t;i=t.size+(o.value?n===yn?-1:1:0)}else{if(n===yn)return t;i=1,r=new pt(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=i,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?wt(i,r):Et()}function kt(t,e,n,r,i,o,a,u){return t?t.update(e,n,r,i,o,a,u):o===yn?t:(f(u),f(a),new vt(e,r,[i,o]))}function It(t){return t.constructor===vt||t.constructor===yt}function Ot(t,e,n,r,i){if(t.keyHash===r)return new yt(e,r,[t.entry,i]);var o,a=(0===n?t.keyHash:t.keyHash>>>n)&mn,u=(0===n?r:r>>>n)&mn;return new dt(e,1<<a|1<<u,a===u?[Ot(t,e,n+pn,r,i)]:(o=new vt(e,r,i),a<u?[t,o]:[o,t]))}function Ct(t,e,n,r){t||(t=new h);for(var i=new vt(t,ot(n),[n,r]),o=0;o<e.length;o++){var a=e[o];i=i.update(t,0,void 0,a[0],a[1])}return i}function xt(t,e,n,r){for(var i=0,o=0,a=new Array(n),u=0,l=1,s=e.length;u<s;u++,l<<=1){var c=e[u];void 0!==c&&u!==r&&(i|=l,a[o++]=c)}return new dt(t,i,a)}function Tt(t,e,n,r,i){for(var o=0,a=new Array(dn),u=0;0!==n;u++,n>>>=1)a[u]=1&n?e[o++]:void 0;return a[r]=i,new mt(t,o+1,a)}function Mt(t,e,r){for(var i=[],a=0;a<r.length;a++){var u=r[a],l=n(u);o(u)||(l=l.map(function(t){return H(t)})),i.push(l)}return Dt(t,e,i)}function jt(t,e,n){return t&&t.mergeDeep&&o(e)?t.mergeDeep(e):Q(t,e)?t:e}function zt(t){return function(e,n,r){if(e&&e.mergeDeepWith&&o(n))return e.mergeDeepWith(t,n);var i=t(e,n,r);return Q(e,i)?e:i}}function Dt(t,e,n){return n=n.filter(function(t){return 0!==t.size}),0===n.length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations(function(t){for(var r=e?function(n,r){t.update(r,yn,function(t){return t===yn?n:e(t,n,r)})}:function(e,n){t.set(n,e)},i=0;i<n.length;i++)n[i].forEach(r)}):t.constructor(n[0])}function Pt(t,e,n,r){var i=t===yn,o=e.next();if(o.done){var a=i?n:t,u=r(a);return u===a?t:u}Z(i||t&&t.set,"invalid keyPath");var l=o.value,s=i?yn:t.get(l,yn),c=Pt(s,e,n,r);return c===s?t:c===yn?t.remove(l):(i?Et():t).set(l,c)}function Nt(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function At(t,e,n,r){var i=r?t:p(t);return i[e]=n,i}function Lt(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),a=0,u=0;u<i;u++)u===e?(o[u]=n,a=-1):o[u]=t[u+a];return o}function Rt(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,a=0;a<r;a++)a===e&&(o=1),i[a]=t[a+o];return i}function qt(t){var e=Wt();if(null===t||void 0===t)return e;if(Ft(t))return t;var n=r(t),i=n.size;return 0===i?e:(ct(i),i>0&&i<dn?Kt(0,i,pn,null,new Ut(n.toArray())):e.withMutations(function(t){t.setSize(i),n.forEach(function(e,n){return t.set(n,e)})}))}function Ft(t){return!(!t||!t[Vn])}function Ut(t,e){this.array=t,this.ownerID=e}function Bt(t,e){function n(t,e,n){return 0===e?r(t,n):i(t,e,n)}function r(t,n){var r=n===u?l&&l.array:t&&t.array,i=n>o?0:o-n,s=a-n;return s>dn&&(s=dn),function(){if(i===s)return Qn;var t=e?--s:i++;return r&&r[t]}}function i(t,r,i){var u,l=t&&t.array,s=i>o?0:o-i>>r,c=1+(a-i>>r);return c>dn&&(c=dn),function(){for(;;){if(u){var t=u();if(t!==Qn)return t;u=null}if(s===c)return Qn;var o=e?--c:s++;u=n(l&&l[o],r-pn,i+(o<<r))}}}var o=t._origin,a=t._capacity,u=Xt(a),l=t._tail;return n(t._root,t._level,0)}function Kt(t,e,n,r,i,o,a){var u=Object.create(Gn);return u.size=e-t,u._origin=t,u._capacity=e,u._level=n,u._root=r,u._tail=i,u.__ownerID=o,u.__hash=a,u.__altered=!1,u}function Wt(){return Jn||(Jn=Kt(0,0,pn))}function Ht(t,e,n){if((e=m(t,e))!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?Qt(t,e).set(0,n):Qt(t,0,e+1).set(e,n)});e+=t._origin;var r=t._tail,i=t._root,o=c(_n);return e>=Xt(t._capacity)?r=Vt(r,t.__ownerID,0,e,n,o):i=Vt(i,t.__ownerID,t._level,e,n,o),o.value?t.__ownerID?(t._root=i,t._tail=r,t.__hash=void 0,t.__altered=!0,t):Kt(t._origin,t._capacity,t._level,i,r):t}function Vt(t,e,n,r,i,o){var a=r>>>n&mn,u=t&&a<t.array.length;if(!u&&void 0===i)return t;var l;if(n>0){var s=t&&t.array[a],c=Vt(s,e,n-pn,r,i,o);return c===s?t:(l=Gt(t,e),l.array[a]=c,l)}return u&&t.array[a]===i?t:(f(o),l=Gt(t,e),void 0===i&&a===l.array.length-1?l.array.pop():l.array[a]=i,l)}function Gt(t,e){return e&&t&&e===t.ownerID?t:new Ut(t?t.array.slice():[],e)}function Jt(t,e){if(e>=Xt(t._capacity))return t._tail;if(e<1<<t._level+pn){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&mn],r-=pn;return n}}function Qt(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new h,i=t._origin,o=t._capacity,a=i+e,u=void 0===n?o:n<0?o+n:i+n;if(a===i&&u===o)return t;if(a>=u)return t.clear();for(var l=t._level,s=t._root,c=0;a+c<0;)s=new Ut(s&&s.array.length?[void 0,s]:[],r),l+=pn,c+=1<<l;c&&(a+=c,i+=c,u+=c,o+=c);for(var f=Xt(o),p=Xt(u);p>=1<<l+pn;)s=new Ut(s&&s.array.length?[s]:[],r),l+=pn;var d=t._tail,m=p<f?Jt(t,u-1):p>f?new Ut([],r):d;if(d&&p>f&&a<o&&d.array.length){s=Gt(s,r);for(var y=s,v=l;v>pn;v-=pn){var _=f>>>v&mn;y=y.array[_]=Gt(y.array[_],r)}y.array[f>>>pn&mn]=d}if(u<o&&(m=m&&m.removeAfter(r,0,u)),a>=p)a-=p,u-=p,l=pn,s=null,m=m&&m.removeBefore(r,0,a);else if(a>i||p<f){for(c=0;s;){var g=a>>>l&mn;if(g!==p>>>l&mn)break;g&&(c+=(1<<l)*g),l-=pn,s=s.array[g]}s&&a>i&&(s=s.removeBefore(r,l,a-c)),s&&p<f&&(s=s.removeAfter(r,l,p-c)),c&&(a-=c,u-=c)}return t.__ownerID?(t.size=u-a,t._origin=a,t._capacity=u,t._level=l,t._root=s,t._tail=m,t.__hash=void 0,t.__altered=!0,t):Kt(a,u,l,s,m)}function Yt(t,e,n){for(var i=[],a=0,u=0;u<n.length;u++){var l=n[u],s=r(l);s.size>a&&(a=s.size),o(l)||(s=s.map(function(t){return H(t)})),i.push(s)}return a>t.size&&(t=t.setSize(a)),Dt(t,e,i)}function Xt(t){return t<dn?0:t-1>>>pn<<pn}function Zt(t){return null===t||void 0===t?ee():$t(t)?t:ee().withMutations(function(e){var r=n(t);ct(r.size),r.forEach(function(t,n){return e.set(n,t)})})}function $t(t){return ht(t)&&s(t)}function te(t,e,n,r){var i=Object.create(Zt.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i}function ee(){return Yn||(Yn=te(Et(),Wt()))}function ne(t,e,n){var r,i,o=t._map,a=t._list,u=o.get(e),l=void 0!==u;if(n===yn){if(!l)return t;a.size>=dn&&a.size>=2*o.size?(i=a.filter(function(t,e){return void 0!==t&&u!==e}),r=i.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(r.__ownerID=i.__ownerID=t.__ownerID)):(r=o.remove(e),i=u===a.size-1?a.pop():a.set(u,void 0))}else if(l){if(n===a.get(u)[1])return t;r=o,i=a.set(u,[e,n])}else r=o.set(e,a.size),i=a.set(a.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=i,t.__hash=void 0,t):te(r,i)}function re(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function ie(t){this._iter=t,this.size=t.size}function oe(t){this._iter=t,this.size=t.size}function ae(t){this._iter=t,this.size=t.size}function ue(t){var e=xe(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Te,e.__iterateUncached=function(e,n){var r=this;return t.__iterate(function(t,n){return!1!==e(n,t,r)},n)},e.__iteratorUncached=function(e,n){if(e===wn){var r=t.__iterator(e,n);return new w(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===bn?gn:bn,n)},e}function le(t,e,n){var r=xe(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,yn);return o===yn?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate(function(t,i,a){return!1!==r(e.call(n,t,i,a),i,o)},i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(wn,i);return new w(function(){var i=o.next();if(i.done)return i;var a=i.value,u=a[0];return E(r,u,e.call(n,a[1],u,t),i)})},r}function se(t,e){var n=xe(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=ue(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,r){return t.get(e?n:-1-n,r)},n.has=function(n){return t.has(e?n:-1-n)},n.includes=function(e){return t.includes(e)},n.cacheResult=Te,n.__iterate=function(e,n){var r=this;return t.__iterate(function(t,n){return e(t,n,r)},!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function ce(t,e,n,r){var i=xe(t);return r&&(i.has=function(r){var i=t.get(r,yn);return i!==yn&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,yn);return o!==yn&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var a=this,u=0;return t.__iterate(function(t,o,l){if(e.call(n,t,o,l))return u++,i(t,r?o:u-1,a)},o),u},i.__iteratorUncached=function(i,o){var a=t.__iterator(wn,o),u=0;return new w(function(){for(;;){var o=a.next();if(o.done)return o;var l=o.value,s=l[0],c=l[1];if(e.call(n,c,s,t))return E(i,r?s:u++,c,o)}})},i}function fe(t,e,n){var r=ft().asMutable();return t.__iterate(function(i,o){r.update(e.call(n,i,o,t),0,function(t){return t+1})}),r.asImmutable()}function he(t,e,n){var r=a(t),i=(s(t)?Zt():ft()).asMutable();t.__iterate(function(o,a){i.update(e.call(n,o,a,t),function(t){return t=t||[],t.push(r?[a,o]:o),t})});var o=Ce(t);return i.map(function(e){return ke(t,o(e))})}function pe(t,e,n,r){var i=t.size;if(void 0!==e&&(e|=0),void 0!==n&&(n|=0),v(e,n,i))return t;var o=_(e,i),a=g(n,i);if(o!==o||a!==a)return pe(t.toSeq().cacheResult(),e,n,r);var u,l=a-o;l===l&&(u=l<0?0:l);var s=xe(t);return s.size=0===u?u:t.size&&u||void 0,!r&&L(t)&&u>=0&&(s.get=function(e,n){return e=m(this,e),e>=0&&e<u?t.get(e+o,n):n}),s.__iterateUncached=function(e,n){var i=this;if(0===u)return 0;if(n)return this.cacheResult().__iterate(e,n);var a=0,l=!0,s=0;return t.__iterate(function(t,n){if(!l||!(l=a++<o))return s++,!1!==e(t,r?n:s-1,i)&&s!==u}),s},s.__iteratorUncached=function(e,n){if(0!==u&&n)return this.cacheResult().__iterator(e,n);var i=0!==u&&t.__iterator(e,n),a=0,l=0;return new w(function(){for(;a++<o;)i.next();if(++l>u)return S();var t=i.next();return r||e===bn?t:e===gn?E(e,l-1,void 0,t):E(e,l-1,t.value[1],t)})},s}function de(t,e,n){var r=xe(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var a=0;return t.__iterate(function(t,i,u){return e.call(n,t,i,u)&&++a&&r(t,i,o)}),a},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var a=t.__iterator(wn,i),u=!0;return new w(function(){if(!u)return S();var t=a.next();if(t.done)return t;var i=t.value,l=i[0],s=i[1];return e.call(n,s,l,o)?r===wn?t:E(r,l,s,t):(u=!1,S())})},r}function me(t,e,n,r){var i=xe(t);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var u=!0,l=0;return t.__iterate(function(t,o,s){if(!u||!(u=e.call(n,t,o,s)))return l++,i(t,r?o:l-1,a)}),l},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var u=t.__iterator(wn,o),l=!0,s=0;return new w(function(){var t,o,c;do{if(t=u.next(),t.done)return r||i===bn?t:i===gn?E(i,s++,void 0,t):E(i,s++,t.value[1],t);var f=t.value;o=f[0],c=f[1],l&&(l=e.call(n,c,o,a))}while(l);return i===wn?t:E(i,o,c,t)})},i}function ye(t,e){var r=a(t),i=[t].concat(e).map(function(t){return o(t)?r&&(t=n(t)):t=r?q(t):F(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===i.length)return t;if(1===i.length){var l=i[0];if(l===t||r&&a(l)||u(t)&&u(l))return l}var s=new D(i);return r?s=s.toKeyedSeq():u(t)||(s=s.toSetSeq()),s=s.flatten(!0),s.size=i.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),s}function ve(t,e,n){var r=xe(t);return r.__iterateUncached=function(r,i){function a(t,s){var c=this;t.__iterate(function(t,i){return(!e||s<e)&&o(t)?a(t,s+1):!1===r(t,n?i:u++,c)&&(l=!0),!l},i)}var u=0,l=!1;return a(t,0),u},r.__iteratorUncached=function(r,i){var a=t.__iterator(r,i),u=[],l=0;return new w(function(){for(;a;){var t=a.next();if(!1===t.done){var s=t.value;if(r===wn&&(s=s[1]),e&&!(u.length<e)||!o(s))return n?t:E(r,l++,s,t);u.push(a),a=s.__iterator(r,i)}else a=u.pop()}return S()})},r}function _e(t,e,n){var r=Ce(t);return t.toSeq().map(function(i,o){return r(e.call(n,i,o,t))}).flatten(!0)}function ge(t,e){var n=xe(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate(function(t,r){return(!o||!1!==n(e,o++,i))&&!1!==n(t,o++,i)},r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(bn,r),a=0;return new w(function(){return(!i||a%2)&&(i=o.next(),i.done)?i:a%2?E(n,a++,e):E(n,a++,i.value,i)})},n}function be(t,e,n){e||(e=Me);var r=a(t),i=0,o=t.toSeq().map(function(e,r){return[r,e,i++,n?n(e,r,t):e]}).toArray();return o.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?M(o):u(t)?j(o):z(o)}function we(t,e,n){if(e||(e=Me),n){var r=t.toSeq().map(function(e,r){return[e,n(e,r,t)]}).reduce(function(t,n){return Ee(e,t[1],n[1])?n:t});return r&&r[0]}return t.reduce(function(t,n){return Ee(e,t,n)?n:t})}function Ee(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(void 0===n||null===n||n!==n)||r>0}function Se(t,n,r){var i=xe(t);return i.size=new D(r).map(function(t){return t.size}).min(),i.__iterate=function(t,e){for(var n,r=this.__iterator(bn,e),i=0;!(n=r.next()).done&&!1!==t(n.value,i++,this););return i},i.__iteratorUncached=function(t,i){var o=r.map(function(t){return t=e(t),O(i?t.reverse():t)}),a=0,u=!1;return new w(function(){var e;return u||(e=o.map(function(t){return t.next()}),u=e.some(function(t){return t.done})),u?S():E(t,a++,n.apply(null,e.map(function(t){return t.value})))})},i}function ke(t,e){return L(t)?e:t.constructor(e)}function Ie(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Oe(t){return ct(t.size),d(t)}function Ce(t){return a(t)?n:u(t)?r:i}function xe(t){return Object.create((a(t)?M:u(t)?j:z).prototype)}function Te(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):T.prototype.cacheResult.call(this)}function Me(t,e){return t>e?1:t<e?-1:0}function je(t){var n=O(t);if(!n){if(!x(t))throw new TypeError("Expected iterable or array-like: "+t);n=O(e(t))}return n}function ze(t,e){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var a=Object.keys(t);Ne(i,a),i.size=a.length,i._name=e,i._keys=a,i._defaultValues=t}this._map=ft(o)},i=r.prototype=Object.create(Xn);return i.constructor=r,r}function De(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._map=e,r.__ownerID=n,r}function Pe(t){return t._name||t.constructor.name||"Record"}function Ne(t,e){try{e.forEach(Ae.bind(void 0,t))}catch(t){}}function Ae(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){Z(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function Le(t){return null===t||void 0===t?Ue():Re(t)&&!s(t)?t:Ue().withMutations(function(e){var n=i(t);ct(n.size),n.forEach(function(t){return e.add(t)})})}function Re(t){return!(!t||!t[Zn])}function qe(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Fe(t,e){var n=Object.create($n);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Ue(){return tr||(tr=Fe(Et()))}function Be(t){return null===t||void 0===t?He():Ke(t)?t:He().withMutations(function(e){var n=i(t);ct(n.size),n.forEach(function(t){return e.add(t)})})}function Ke(t){return Re(t)&&s(t)}function We(t,e){var n=Object.create(er);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function He(){return nr||(nr=We(ee()))}function Ve(t){return null===t||void 0===t?Qe():Ge(t)?t:Qe().unshiftAll(t)}function Ge(t){return!(!t||!t[rr])}function Je(t,e,n,r){var i=Object.create(ir);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Qe(){return or||(or=Je(0))}function Ye(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function Xe(t,e){return e}function Ze(t,e){return[e,t]}function $e(t){return function(){return!t.apply(this,arguments)}}function tn(t){return function(){return-t.apply(this,arguments)}}function en(t){return"string"==typeof t?JSON.stringify(t):t}function nn(){return p(arguments)}function rn(t,e){return t<e?1:t>e?-1:0}function on(t){if(t.size===1/0)return 0;var e=s(t),n=a(t),r=e?1:0;return an(t.__iterate(n?e?function(t,e){r=31*r+un(ot(t),ot(e))|0}:function(t,e){r=r+un(ot(t),ot(e))|0}:e?function(t){r=31*r+ot(t)|0}:function(t){r=r+ot(t)|0}),r)}function an(t,e){return e=Mn(e,3432918353),e=Mn(e<<15|e>>>-15,461845907),e=Mn(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=Mn(e^e>>>16,2246822507),e=Mn(e^e>>>13,3266489909),e=it(e^e>>>16)}function un(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var ln=Array.prototype.slice;t(n,e),t(r,e),t(i,e),e.isIterable=o,e.isKeyed=a,e.isIndexed=u,e.isAssociative=l,e.isOrdered=s,e.Keyed=n,e.Indexed=r,e.Set=i;var sn="@@__IMMUTABLE_ITERABLE__@@",cn="@@__IMMUTABLE_KEYED__@@",fn="@@__IMMUTABLE_INDEXED__@@",hn="@@__IMMUTABLE_ORDERED__@@",pn=5,dn=1<<pn,mn=dn-1,yn={},vn={value:!1},_n={value:!1},gn=0,bn=1,wn=2,En="function"==typeof Symbol&&Symbol.iterator,Sn="@@iterator",kn=En||Sn;w.prototype.toString=function(){return"[Iterator]"},w.KEYS=gn,w.VALUES=bn,w.ENTRIES=wn,w.prototype.inspect=w.prototype.toSource=function(){return this.toString()},w.prototype[kn]=function(){return this},t(T,e),T.of=function(){return T(arguments)},T.prototype.toSeq=function(){return this},T.prototype.toString=function(){return this.__toString("Seq {","}")},T.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},T.prototype.__iterate=function(t,e){return K(this,t,e,!0)},T.prototype.__iterator=function(t,e){return W(this,t,e,!0)},t(M,T),M.prototype.toKeyedSeq=function(){return this},t(j,T),j.of=function(){return j(arguments)},j.prototype.toIndexedSeq=function(){return this},j.prototype.toString=function(){return this.__toString("Seq [","]")},j.prototype.__iterate=function(t,e){return K(this,t,e,!1)},j.prototype.__iterator=function(t,e){return W(this,t,e,!1)},t(z,T),z.of=function(){return z(arguments)},z.prototype.toSetSeq=function(){return this},T.isSeq=L,T.Keyed=M,T.Set=z,T.Indexed=j;var In="@@__IMMUTABLE_SEQ__@@";T.prototype[In]=!0,t(D,j),D.prototype.get=function(t,e){return this.has(t)?this._array[m(this,t)]:e},D.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length-1,i=0;i<=r;i++)if(!1===t(n[e?r-i:i],i,this))return i+1;return i},D.prototype.__iterator=function(t,e){var n=this._array,r=n.length-1,i=0;return new w(function(){return i>r?S():E(t,i,n[e?r-i++:i++])})},t(P,M),P.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},P.prototype.has=function(t){return this._object.hasOwnProperty(t)},P.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,i=r.length-1,o=0;o<=i;o++){var a=r[e?i-o:o];if(!1===t(n[a],a,this))return o+1}return o},P.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length-1,o=0;return new w(function(){var a=r[e?i-o:o];return o++>i?S():E(t,a,n[a])})},P.prototype[hn]=!0,t(N,j),N.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=this._iterable,r=O(n),i=0;if(I(r))for(var o;!(o=r.next()).done&&!1!==t(o.value,i++,this););return i},N.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterable,r=O(n);if(!I(r))return new w(S);var i=0;return new w(function(){var e=r.next();return e.done?e:E(t,i++,e.value)})},t(A,j),A.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n=this._iterator,r=this._iteratorCache,i=0;i<r.length;)if(!1===t(r[i],i++,this))return i;for(var o;!(o=n.next()).done;){var a=o.value;if(r[i]=a,!1===t(a,i++,this))break}return i},A.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,r=this._iteratorCache,i=0;return new w(function(){if(i>=r.length){var e=n.next();if(e.done)return e;r[i]=e.value}return E(t,i,r[i++])})};var On;t(X,j),X.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},X.prototype.get=function(t,e){return this.has(t)?this._value:e},X.prototype.includes=function(t){return Q(this._value,t)},X.prototype.slice=function(t,e){var n=this.size;return v(t,e,n)?this:new X(this._value,g(e,n)-_(t,n))},X.prototype.reverse=function(){return this},X.prototype.indexOf=function(t){return Q(this._value,t)?0:-1},X.prototype.lastIndexOf=function(t){return Q(this._value,t)?this.size:-1},X.prototype.__iterate=function(t,e){for(var n=0;n<this.size;n++)if(!1===t(this._value,n,this))return n+1;return n},X.prototype.__iterator=function(t,e){var n=this,r=0;return new w(function(){return r<n.size?E(t,r++,n._value):S()})},X.prototype.equals=function(t){return t instanceof X?Q(this._value,t._value):Y(t)};var Cn;t($,j),$.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},$.prototype.get=function(t,e){return this.has(t)?this._start+m(this,t)*this._step:e},$.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},$.prototype.slice=function(t,e){return v(t,e,this.size)?this:(t=_(t,this.size),e=g(e,this.size),e<=t?new $(0,0):new $(this.get(t,this._end),this.get(e,this._end),this._step))},$.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},$.prototype.lastIndexOf=function(t){return this.indexOf(t)},$.prototype.__iterate=function(t,e){for(var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;o<=n;o++){if(!1===t(i,o,this))return o+1;i+=e?-r:r}return o},$.prototype.__iterator=function(t,e){var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;return new w(function(){var a=i;return i+=e?-r:r,o>n?S():E(t,o++,a)})},$.prototype.equals=function(t){return t instanceof $?this._start===t._start&&this._end===t._end&&this._step===t._step:Y(this,t)};var xn;t(tt,e),t(et,tt),t(nt,tt),t(rt,tt),tt.Keyed=et,tt.Indexed=nt,tt.Set=rt;var Tn,Mn="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){t|=0,e|=0;var n=65535&t,r=65535&e;return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0},jn=Object.isExtensible,zn=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),Dn="function"==typeof WeakMap;Dn&&(Tn=new WeakMap);var Pn=0,Nn="__immutablehash__";"function"==typeof Symbol&&(Nn=Symbol(Nn));var An=16,Ln=255,Rn=0,qn={};t(ft,et),ft.prototype.toString=function(){return this.__toString("Map {","}")},ft.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},ft.prototype.set=function(t,e){return St(this,t,e)},ft.prototype.setIn=function(t,e){return this.updateIn(t,yn,function(){return e})},ft.prototype.remove=function(t){return St(this,t,yn)},ft.prototype.deleteIn=function(t){return this.updateIn(t,function(){return yn})},ft.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},ft.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var r=Pt(this,je(t),e,n);return r===yn?void 0:r},ft.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Et()},ft.prototype.merge=function(){return Mt(this,void 0,arguments)},ft.prototype.mergeWith=function(t){return Mt(this,t,ln.call(arguments,1))},ft.prototype.mergeIn=function(t){var e=ln.call(arguments,1);return this.updateIn(t,Et(),function(t){return"function"==typeof t.merge?t.merge.apply(t,e):e[e.length-1]})},ft.prototype.mergeDeep=function(){return Mt(this,jt,arguments)},ft.prototype.mergeDeepWith=function(t){var e=ln.call(arguments,1);return Mt(this,zt(t),e)},ft.prototype.mergeDeepIn=function(t){var e=ln.call(arguments,1);return this.updateIn(t,Et(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,e):e[e.length-1]})},ft.prototype.sort=function(t){return Zt(be(this,t))},ft.prototype.sortBy=function(t,e){return Zt(be(this,e,t))},ft.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},ft.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new h)},ft.prototype.asImmutable=function(){return this.__ensureOwner()},ft.prototype.wasAltered=function(){return this.__altered},ft.prototype.__iterator=function(t,e){return new _t(this,t,e)},ft.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate(function(e){return r++,t(e[1],e[0],n)},e),r},ft.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?wt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},ft.isMap=ht;var Fn="@@__IMMUTABLE_MAP__@@",Un=ft.prototype;Un[Fn]=!0,Un.delete=Un.remove,Un.removeIn=Un.deleteIn,pt.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(Q(n,i[o][0]))return i[o][1];return r},pt.prototype.update=function(t,e,n,r,i,o,a){for(var u=i===yn,l=this.entries,s=0,c=l.length;s<c&&!Q(r,l[s][0]);s++);var h=s<c;if(h?l[s][1]===i:u)return this;if(f(a),(u||!h)&&f(o),!u||1!==l.length){if(!h&&!u&&l.length>=Kn)return Ct(t,l,r,i);var d=t&&t===this.ownerID,m=d?l:p(l);return h?u?s===c-1?m.pop():m[s]=m.pop():m[s]=[r,i]:m.push([r,i]),d?(this.entries=m,this):new pt(t,m)}},dt.prototype.get=function(t,e,n,r){void 0===e&&(e=ot(n));var i=1<<((0===t?e:e>>>t)&mn),o=this.bitmap;return 0==(o&i)?r:this.nodes[Nt(o&i-1)].get(t+pn,e,n,r)},dt.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=ot(r));var u=(0===e?n:n>>>e)&mn,l=1<<u,s=this.bitmap,c=0!=(s&l);if(!c&&i===yn)return this;var f=Nt(s&l-1),h=this.nodes,p=c?h[f]:void 0,d=kt(p,t,e+pn,n,r,i,o,a);if(d===p)return this;if(!c&&d&&h.length>=Wn)return Tt(t,h,s,u,d);if(c&&!d&&2===h.length&&It(h[1^f]))return h[1^f];if(c&&d&&1===h.length&&It(d))return d;var m=t&&t===this.ownerID,y=c?d?s:s^l:s|l,v=c?d?At(h,f,d,m):Rt(h,f,m):Lt(h,f,d,m);return m?(this.bitmap=y,this.nodes=v,this):new dt(t,y,v)},mt.prototype.get=function(t,e,n,r){void 0===e&&(e=ot(n));var i=(0===t?e:e>>>t)&mn,o=this.nodes[i];return o?o.get(t+pn,e,n,r):r},mt.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=ot(r));var u=(0===e?n:n>>>e)&mn,l=i===yn,s=this.nodes,c=s[u];if(l&&!c)return this;var f=kt(c,t,e+pn,n,r,i,o,a);if(f===c)return this;var h=this.count;if(c){if(!f&&--h<Hn)return xt(t,s,h,u)}else h++;var p=t&&t===this.ownerID,d=At(s,u,f,p);return p?(this.count=h,this.nodes=d,this):new mt(t,h,d)},yt.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(Q(n,i[o][0]))return i[o][1];return r},yt.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=ot(r));var u=i===yn;if(n!==this.keyHash)return u?this:(f(a),f(o),Ot(this,t,e,n,[r,i]));for(var l=this.entries,s=0,c=l.length;s<c&&!Q(r,l[s][0]);s++);var h=s<c;if(h?l[s][1]===i:u)return this;if(f(a),(u||!h)&&f(o),u&&2===c)return new vt(t,this.keyHash,l[1^s]);var d=t&&t===this.ownerID,m=d?l:p(l);return h?u?s===c-1?m.pop():m[s]=m.pop():m[s]=[r,i]:m.push([r,i]),d?(this.entries=m,this):new yt(t,this.keyHash,m)},vt.prototype.get=function(t,e,n,r){return Q(n,this.entry[0])?this.entry[1]:r},vt.prototype.update=function(t,e,n,r,i,o,a){var u=i===yn,l=Q(r,this.entry[0]);return(l?i===this.entry[1]:u)?this:(f(a),u?void f(o):l?t&&t===this.ownerID?(this.entry[1]=i,this):new vt(t,this.keyHash,[r,i]):(f(o),Ot(this,t,e,ot(r),[r,i])))},pt.prototype.iterate=yt.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===t(n[e?i-r:r]))return!1},dt.prototype.iterate=mt.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[e?i-r:r];if(o&&!1===o.iterate(t,e))return!1}},vt.prototype.iterate=function(t,e){return t(this.entry)},t(_t,w),_t.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,r=e.node,i=e.index++;if(r.entry){if(0===i)return gt(t,r.entry)}else if(r.entries){if(n=r.entries.length-1,i<=n)return gt(t,r.entries[this._reverse?n-i:i])}else if(n=r.nodes.length-1,i<=n){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return gt(t,o.entry);e=this._stack=bt(o,e)}continue}e=this._stack=this._stack.__prev}return S()};var Bn,Kn=dn/4,Wn=dn/2,Hn=dn/4;t(qt,nt),qt.of=function(){return this(arguments)},qt.prototype.toString=function(){return this.__toString("List [","]")},qt.prototype.get=function(t,e){if((t=m(this,t))>=0&&t<this.size){t+=this._origin;var n=Jt(this,t);return n&&n.array[t&mn]}return e},qt.prototype.set=function(t,e){return Ht(this,t,e)},qt.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},qt.prototype.insert=function(t,e){return this.splice(t,0,e)},qt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=pn,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Wt()},qt.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){Qt(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])})},qt.prototype.pop=function(){return Qt(this,0,-1)},qt.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Qt(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},qt.prototype.shift=function(){return Qt(this,1)},qt.prototype.merge=function(){return Yt(this,void 0,arguments)},qt.prototype.mergeWith=function(t){return Yt(this,t,ln.call(arguments,1))},qt.prototype.mergeDeep=function(){return Yt(this,jt,arguments)},qt.prototype.mergeDeepWith=function(t){var e=ln.call(arguments,1);return Yt(this,zt(t),e)},qt.prototype.setSize=function(t){return Qt(this,0,t)},qt.prototype.slice=function(t,e){var n=this.size;return v(t,e,n)?this:Qt(this,_(t,n),g(e,n))},qt.prototype.__iterator=function(t,e){var n=0,r=Bt(this,e);return new w(function(){var e=r();return e===Qn?S():E(t,n++,e)})},qt.prototype.__iterate=function(t,e){for(var n,r=0,i=Bt(this,e);(n=i())!==Qn&&!1!==t(n,r++,this););return r},qt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Kt(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},qt.isList=Ft;var Vn="@@__IMMUTABLE_LIST__@@",Gn=qt.prototype;Gn[Vn]=!0,Gn.delete=Gn.remove,Gn.setIn=Un.setIn,Gn.deleteIn=Gn.removeIn=Un.removeIn,Gn.update=Un.update,Gn.updateIn=Un.updateIn,Gn.mergeIn=Un.mergeIn,Gn.mergeDeepIn=Un.mergeDeepIn,Gn.withMutations=Un.withMutations,Gn.asMutable=Un.asMutable,Gn.asImmutable=Un.asImmutable,Gn.wasAltered=Un.wasAltered,Ut.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&mn;if(r>=this.array.length)return new Ut([],t);var i,o=0===r;if(e>0){var a=this.array[r];if((i=a&&a.removeBefore(t,e-pn,n))===a&&o)return this}if(o&&!i)return this;var u=Gt(this,t);if(!o)for(var l=0;l<r;l++)u.array[l]=void 0;return i&&(u.array[r]=i),u},Ut.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r=n-1>>>e&mn;if(r>=this.array.length)return this;var i;if(e>0){var o=this.array[r];if((i=o&&o.removeAfter(t,e-pn,n))===o&&r===this.array.length-1)return this}var a=Gt(this,t);return a.array.splice(r+1),i&&(a.array[r]=i),a};var Jn,Qn={};t(Zt,ft),Zt.of=function(){return this(arguments)},Zt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Zt.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},Zt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ee()},Zt.prototype.set=function(t,e){return ne(this,t,e)},Zt.prototype.remove=function(t){return ne(this,t,yn)},Zt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Zt.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},Zt.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Zt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?te(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},Zt.isOrderedMap=$t,Zt.prototype[hn]=!0,Zt.prototype.delete=Zt.prototype.remove;var Yn;t(re,M),re.prototype.get=function(t,e){return this._iter.get(t,e)},re.prototype.has=function(t){return this._iter.has(t)},re.prototype.valueSeq=function(){return this._iter.valueSeq()},re.prototype.reverse=function(){var t=this,e=se(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},re.prototype.map=function(t,e){var n=this,r=le(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},re.prototype.__iterate=function(t,e){var n,r=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,r)}:(n=e?Oe(this):0,function(i){return t(i,e?--n:n++,r)}),e)},re.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(bn,e),r=e?Oe(this):0;return new w(function(){var i=n.next();return i.done?i:E(t,e?--r:r++,i.value,i)})},re.prototype[hn]=!0,t(ie,j),ie.prototype.includes=function(t){return this._iter.includes(t)},ie.prototype.__iterate=function(t,e){var n=this,r=0;return this._iter.__iterate(function(e){return t(e,r++,n)},e)},ie.prototype.__iterator=function(t,e){var n=this._iter.__iterator(bn,e),r=0;return new w(function(){var e=n.next();return e.done?e:E(t,r++,e.value,e)})},t(oe,z),oe.prototype.has=function(t){return this._iter.includes(t)},oe.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},oe.prototype.__iterator=function(t,e){var n=this._iter.__iterator(bn,e);return new w(function(){var e=n.next();return e.done?e:E(t,e.value,e.value,e)})},t(ae,M),ae.prototype.entrySeq=function(){return this._iter.toSeq()},ae.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){if(e){Ie(e);var r=o(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}},e)},ae.prototype.__iterator=function(t,e){var n=this._iter.__iterator(bn,e);return new w(function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){Ie(r);var i=o(r);return E(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}})},ie.prototype.cacheResult=re.prototype.cacheResult=oe.prototype.cacheResult=ae.prototype.cacheResult=Te,t(ze,et),ze.prototype.toString=function(){return this.__toString(Pe(this)+" {","}")},ze.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},ze.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},ze.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=De(this,Et()))},ze.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+Pe(this));var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:De(this,n)},ze.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:De(this,e)},ze.prototype.wasAltered=function(){return this._map.wasAltered()},ze.prototype.__iterator=function(t,e){var r=this;return n(this._defaultValues).map(function(t,e){return r.get(e)}).__iterator(t,e)},ze.prototype.__iterate=function(t,e){var r=this;return n(this._defaultValues).map(function(t,e){return r.get(e)}).__iterate(t,e)},ze.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?De(this,e,t):(this.__ownerID=t,this._map=e,this)};var Xn=ze.prototype;Xn.delete=Xn.remove,Xn.deleteIn=Xn.removeIn=Un.removeIn,Xn.merge=Un.merge,Xn.mergeWith=Un.mergeWith,Xn.mergeIn=Un.mergeIn,Xn.mergeDeep=Un.mergeDeep,Xn.mergeDeepWith=Un.mergeDeepWith,Xn.mergeDeepIn=Un.mergeDeepIn,Xn.setIn=Un.setIn,Xn.update=Un.update,Xn.updateIn=Un.updateIn,Xn.withMutations=Un.withMutations,Xn.asMutable=Un.asMutable,Xn.asImmutable=Un.asImmutable,t(Le,rt),Le.of=function(){return this(arguments)},Le.fromKeys=function(t){return this(n(t).keySeq())},Le.prototype.toString=function(){return this.__toString("Set {","}")},Le.prototype.has=function(t){return this._map.has(t)},Le.prototype.add=function(t){return qe(this,this._map.set(t,!0))},Le.prototype.remove=function(t){return qe(this,this._map.remove(t))},Le.prototype.clear=function(){return qe(this,this._map.clear())},Le.prototype.union=function(){var t=ln.call(arguments,0);return t=t.filter(function(t){return 0!==t.size}),0===t.length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(e){for(var n=0;n<t.length;n++)i(t[n]).forEach(function(t){return e.add(t)})}):this.constructor(t[0])},Le.prototype.intersect=function(){var t=ln.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.every(function(t){return t.includes(e)})||n.remove(e)})})},Le.prototype.subtract=function(){var t=ln.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.some(function(t){return t.includes(e)})&&n.remove(e)})})},Le.prototype.merge=function(){return this.union.apply(this,arguments)},Le.prototype.mergeWith=function(t){var e=ln.call(arguments,1);return this.union.apply(this,e)},Le.prototype.sort=function(t){return Be(be(this,t))},Le.prototype.sortBy=function(t,e){return Be(be(this,e,t))},Le.prototype.wasAltered=function(){return this._map.wasAltered()},Le.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e,r){return t(r,r,n)},e)},Le.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},Le.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},Le.isSet=Re;var Zn="@@__IMMUTABLE_SET__@@",$n=Le.prototype;$n[Zn]=!0,$n.delete=$n.remove,$n.mergeDeep=$n.merge,$n.mergeDeepWith=$n.mergeWith,$n.withMutations=Un.withMutations,$n.asMutable=Un.asMutable,$n.asImmutable=Un.asImmutable,$n.__empty=Ue,$n.__make=Fe;var tr;t(Be,Le),Be.of=function(){return this(arguments)},Be.fromKeys=function(t){return this(n(t).keySeq())},Be.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Be.isOrderedSet=Ke;var er=Be.prototype;er[hn]=!0,er.__empty=He,er.__make=We;var nr;t(Ve,nt),Ve.of=function(){return this(arguments)},Ve.prototype.toString=function(){return this.__toString("Stack [","]")},Ve.prototype.get=function(t,e){var n=this._head;for(t=m(this,t);n&&t--;)n=n.next;return n?n.value:e},Ve.prototype.peek=function(){return this._head&&this._head.value},Ve.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Je(t,e)},Ve.prototype.pushAll=function(t){if(t=r(t),0===t.size)return this;ct(t.size);var e=this.size,n=this._head;return t.reverse().forEach(function(t){e++,n={value:t,next:n}}),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):Je(e,n)},Ve.prototype.pop=function(){return this.slice(1)},Ve.prototype.unshift=function(){return this.push.apply(this,arguments)},Ve.prototype.unshiftAll=function(t){return this.pushAll(t)},Ve.prototype.shift=function(){return this.pop.apply(this,arguments)},Ve.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Qe()},Ve.prototype.slice=function(t,e){if(v(t,e,this.size))return this;var n=_(t,this.size);if(g(e,this.size)!==this.size)return nt.prototype.slice.call(this,t,e);for(var r=this.size-n,i=this._head;n--;)i=i.next;return this.__ownerID?(this.size=r,this._head=i,this.__hash=void 0,this.__altered=!0,this):Je(r,i)},Ve.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Je(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Ve.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,r=this._head;r&&!1!==t(r.value,n++,this);)r=r.next;return n},Ve.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var n=0,r=this._head;return new w(function(){if(r){var e=r.value;return r=r.next,E(t,n++,e)}return S()})},Ve.isStack=Ge;var rr="@@__IMMUTABLE_STACK__@@",ir=Ve.prototype;ir[rr]=!0,ir.withMutations=Un.withMutations,ir.asMutable=Un.asMutable,ir.asImmutable=Un.asImmutable,ir.wasAltered=Un.wasAltered;var or;e.Iterator=w,Ye(e,{toArray:function(){ct(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,n){t[n]=e}),t},toIndexedSeq:function(){return new ie(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new re(this,!0)},toMap:function(){return ft(this.toKeyedSeq())},toObject:function(){ct(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t},toOrderedMap:function(){return Zt(this.toKeyedSeq())},toOrderedSet:function(){return Be(a(this)?this.valueSeq():this)},toSet:function(){return Le(a(this)?this.valueSeq():this)},toSetSeq:function(){return new oe(this)},toSeq:function(){return u(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Ve(a(this)?this.valueSeq():this)},toList:function(){return qt(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){return ke(this,ye(this,ln.call(arguments,0)))},includes:function(t){return this.some(function(e){return Q(e,t)})},entries:function(){return this.__iterator(wn)},every:function(t,e){ct(this.size);var n=!0;return this.__iterate(function(r,i,o){if(!t.call(e,r,i,o))return n=!1,!1}),n},filter:function(t,e){return ke(this,ce(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},findEntry:function(t,e){var n;return this.__iterate(function(r,i,o){if(t.call(e,r,i,o))return n=[i,r],!1}),n},findLastEntry:function(t,e){return this.toSeq().reverse().findEntry(t,e)},forEach:function(t,e){return ct(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){ct(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(r){n?n=!1:e+=t,e+=null!==r&&void 0!==r?r.toString():""}),e},keys:function(){return this.__iterator(gn)},map:function(t,e){return ke(this,le(this,t,e))},reduce:function(t,e,n){ct(this.size);var r,i;return arguments.length<2?i=!0:r=e,this.__iterate(function(e,o,a){i?(i=!1,r=e):r=t.call(n,r,e,o,a)}),r},reduceRight:function(t,e,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return ke(this,se(this,!0))},slice:function(t,e){return ke(this,pe(this,t,e,!0))},some:function(t,e){return!this.every($e(t),e)},sort:function(t){return ke(this,be(this,t))},values:function(){return this.__iterator(bn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return d(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return fe(this,t,e)},equals:function(t){return Y(this,t)},entrySeq:function(){var t=this;if(t._cache)return new D(t._cache);var e=t.toSeq().map(Ze).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter($e(t),e)},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},first:function(){return this.find(y)},flatMap:function(t,e){return ke(this,_e(this,t,e))},flatten:function(t){return ke(this,ve(this,t,!0))},fromEntrySeq:function(){return new ae(this)},get:function(t,e){return this.find(function(e,n){return Q(n,t)},void 0,e)},getIn:function(t,e){for(var n,r=this,i=je(t);!(n=i.next()).done;){var o=n.value;if((r=r&&r.get?r.get(o,yn):yn)===yn)return e}return r},groupBy:function(t,e){return he(this,t,e)},has:function(t){return this.get(t,yn)!==yn},hasIn:function(t){return this.getIn(t,yn)!==yn},isSubset:function(t){return t="function"==typeof t.includes?t:e(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return t="function"==typeof t.isSubset?t:e(t),t.isSubset(this)},keySeq:function(){return this.toSeq().map(Xe).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(t){return we(this,t)},maxBy:function(t,e){return we(this,e,t)},min:function(t){return we(this,t?tn(t):rn)},minBy:function(t,e){return we(this,e?tn(e):rn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return ke(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return ke(this,me(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile($e(t),e)},sortBy:function(t,e){return ke(this,be(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return ke(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return ke(this,de(this,t,e))},takeUntil:function(t,e){return this.takeWhile($e(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=on(this))}});var ar=e.prototype;ar[sn]=!0,ar[kn]=ar.values,ar.__toJS=ar.toArray,ar.__toStringMapper=en,ar.inspect=ar.toSource=function(){return this.toString()},ar.chain=ar.flatMap,ar.contains=ar.includes,function(){try{Object.defineProperty(ar,"length",{get:function(){if(!e.noLengthWarning){var t;try{throw new Error}catch(e){t=e.stack}if(-1===t.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+t),this.size}}})}catch(t){}}(),Ye(n,{flip:function(){return ke(this,ue(this))},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLastKey:function(t,e){return this.toSeq().reverse().findKey(t,e)},keyOf:function(t){return this.findKey(function(e){return Q(e,t)})},lastKeyOf:function(t){return this.findLastKey(function(e){return Q(e,t)})},mapEntries:function(t,e){var n=this,r=0;return ke(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return ke(this,this.toSeq().flip().map(function(r,i){return t.call(e,r,i,n)}).flip())}});var ur=n.prototype;return ur[cn]=!0,ur[kn]=ar.entries,ur.__toJS=ar.toObject,ur.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+en(t)},Ye(r,{toKeyedSeq:function(){return new re(this,!1)},filter:function(t,e){return ke(this,ce(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.toKeyedSeq().keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.toKeyedSeq().reverse().keyOf(t);return void 0===e?-1:e},reverse:function(){return ke(this,se(this,!1))},slice:function(t,e){return ke(this,pe(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=_(t,t<0?this.count():this.size);var r=this.slice(0,t);return ke(this,1===n?r:r.concat(p(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.toKeyedSeq().findLastKey(t,e);return void 0===n?-1:n},first:function(){return this.get(0)},flatten:function(t){return ke(this,ve(this,t,!1))},get:function(t,e){return t=m(this,t),t<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return(t=m(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return ke(this,ge(this,t))},interleave:function(){var t=[this].concat(p(arguments)),e=Se(this.toSeq(),j.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),ke(this,n)},last:function(){return this.get(-1)},skipWhile:function(t,e){return ke(this,me(this,t,e,!1))},zip:function(){return ke(this,Se(this,nn,[this].concat(p(arguments))))},zipWith:function(t){var e=p(arguments);return e[0]=this,ke(this,Se(this,t,e))}}),r.prototype[fn]=!0,r.prototype[hn]=!0,Ye(i,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=ar.includes,Ye(M,n.prototype),Ye(j,r.prototype),Ye(z,i.prototype),Ye(et,n.prototype),Ye(nt,r.prototype),Ye(rt,i.prototype),{Iterable:e,Seq:T,Collection:tt,Map:ft,OrderedMap:Zt,List:qt,Stack:Ve,Set:Le,OrderedSet:Be,Record:ze,Range:$,Repeat:X,is:Q,fromJS:H}})},function(t,e,n){try{(function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(31);var a=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(a),l=function(e){function n(){return t(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,e),o(n,[{key:"render",value:function(){var t=this.props,e=t.active,n=t.onClick,r=t.className;return u.default.createElement("div",{onClick:function(){return n()},className:"switch-button "+r+(e?" active":"")},u.default.createElement("span",null))}}]),n}(u.default.Component);e.default=l}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.blocks=e.getHeadings=void 0;var t=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(t);e.getHeadings=function(t){return[{key:"header-one",title:t.controls.header+" 1",text:r.default.createElement("h1",null,t.controls.header," 1"),type:"block-type",command:"header-one"},{key:"header-two",title:t.controls.header+" 2",text:r.default.createElement("h2",null,t.controls.header," 2"),type:"block-type",command:"header-two"},{key:"header-three",title:t.controls.header+" 3",text:r.default.createElement("h3",null,t.controls.header," 3"),type:"block-type",command:"header-three"},{key:"header-four",title:t.controls.header+" 4",text:r.default.createElement("h4",null,t.controls.header," 4"),type:"block-type",command:"header-four"},{key:"header-five",title:t.controls.header+" 5",text:r.default.createElement("h5",null,t.controls.header," 5"),type:"block-type",command:"header-five"},{key:"header-six",title:t.controls.header+" 6",text:r.default.createElement("h6",null,t.controls.header," 6"),type:"block-type",command:"header-six"}]},e.blocks={"header-one":"h1","header-two":"h2","header-three":"h3","header-four":"h4","header-fiv":"h5","header-six":"h6",unstyled:"p",blockquote:"blockquote"}}).call(this)}finally{}},function(t,e){},function(t,e){},function(t,e,n){(function(t){try{(function(){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(21);var s=n(0),c=r(s),f=n(1),h=n(45),p=r(h),d=n(39),m=r(d),y=n(38),v=r(y),_=n(42),g=r(_),b=n(37),w=r(b),E=n(36),S=r(E),k=n(41),I=r(k),O=n(40),C=r(O),x=function(e){function n(){var e,r,a,u;i(this,n);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return r=a=o(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(s))),a.mediaPicker=null,a.videoPicker=null,a.audioPicker=null,a.applyEditorState=function(e){a.props.onChange(e),t(function(){a.props.editor.focus()})},a.showMediaPicker=function(){a.mediaPicker.show()},u=r,o(a,u)}return a(n,e),l(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.controls,r=e.editorState,i=e.contentState,o=e.media,a=e.addonControls,l=e.language,s=e.colors,f=e.fontSizes,h=e.fontFamilies,d=e.viewWrapper,y=e.mediaLibrary,_=r.getSelection(),b=r.getCurrentInlineStyle(),E=i.getBlockForKey(_.getStartKey()).getType(),k=(0,p.default)(l),O={language:l,editorState:r,contentState:i,currentInlineStyle:b,selection:_,viewWrapper:d},x=a.map(function(t,e){return"split"===t.type?c.default.createElement("span",{key:n.length+e,className:"split-line"}):c.default.createElement("button",{key:n.length+e,title:t.title,className:"control-item button "+t.className,onClick:function(){return t.onClick(r)}},t.text)});return c.default.createElement("div",{className:"BraftEditor-controlBar"},c.default.createElement(C.default,u({media:o,ref:function(e){return t.mediaPicker=e},onChange:this.applyEditorState,mediaLibrary:y},O)),n.map(function(e,n){if("split"===e.toLowerCase())return c.default.createElement("span",{key:n,className:"split-line"});var r=k.find(function(t){return t.key.toLowerCase()===e.toLowerCase()});if(!r)return null;if("headings"===r.type)return c.default.createElement(v.default,u({key:n,current:E,onChange:function(e){return t.applyControl(e,"block-type")}},O));if("text-color"===r.type)return c.default.createElement(g.default,u({key:n,colors:s,onChange:t.applyEditorState},O));if("font-size"===r.type)return c.default.createElement(w.default,u({key:n,fontSizes:f,defaultCaption:r.title,onChange:t.applyEditorState},O));if("font-family"===r.type)return c.default.createElement(S.default,u({key:n,fontFamilies:h,defaultCaption:r.title,onChange:t.applyEditorState},O));if("link"===r.type)return c.default.createElement(m.default,u({key:n,defaultCaption:r.title,onChange:t.applyEditorState},O));if("text-align"===r.type)return c.default.createElement(I.default,u({key:n,onChange:t.applyEditorState},O));if("media"===r.type)return o.image||o.video||o.audio?c.default.createElement("button",{key:n,title:r.title,className:"control-item button",onClick:t.showMediaPicker},r.text):null;var i=t.getControlItemClassName({type:r.type,command:r.command,currentBlockType:E,currentInlineStyle:b});return c.default.createElement("button",{key:n,title:r.title,className:i,onClick:function(){return t.applyControl(r.command,r.type)}},r.text)}),x)}},{key:"getControlItemClassName",value:function(t){var e="control-item button",n=t.type,r=t.command,i=t.currentBlockType,o=t.currentInlineStyle;return"inline-style"===n?o.has(r.toUpperCase())&&(e+=" active"):"block-type"===n&&i===r&&(e+=" active"),e}},{key:"applyControl",value:function(e,n){var r=this;"inline-style"===n?this.props.onChange(f.RichUtils.toggleInlineStyle(this.props.editorState,e.toUpperCase())):"block-type"===n?this.props.onChange(f.RichUtils.toggleBlockType(this.props.editorState,e)):"editor-state-method"===n&&this.props.onChange(f.EditorState[e](this.props.editorState)),t(function(){r.props.editor.focus()})}}]),n}(c.default.Component);e.default=x}).call(this)}finally{}}).call(e,n(5).setImmediate)},function(t,e,n){try{(function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFromHTMLConfig=e.getToHTMLConfig=void 0;var t=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(t),i=n(1),o=n(10),a=n(2),u=function(t,e){var n=e.getBlockForKey(t.key),i=n.getEntityAt(0),o=e.getEntity(i),a=o.getType().toLowerCase(),u=t.data,l=u.float,s=u.alignment,c=o.getData(),f=c.url,h=c.link,p=c.link_target,d=c.width,m=c.height;if("image"===a){var y={};return l?y.float=l:s&&(y.textAlign=s),h?r.default.createElement("div",{className:"media-wrap image-wrap",style:y},r.default.createElement("a",{style:{display:"inline-block"},href:h,target:p},r.default.createElement("img",{src:f,width:d,height:m}))):r.default.createElement("div",{className:"media-wrap image-wrap",style:y},r.default.createElement("img",{src:f,width:d,height:m}))}return"audio"===a?r.default.createElement("div",{className:"media-wrap audio-wrap"},r.default.createElement("audio",{controls:!0,src:f})):"video"===a?r.default.createElement("div",{className:"media-wrap video-wrap"},r.default.createElement("video",{controls:!0,src:f,width:d,height:m})):r.default.createElement("p",null)},l=function(t){return function(e){if("strikethrough"===(e=e.toLowerCase()))return r.default.createElement("span",{style:{textDecoration:"line-through"}});if("superscript"===e)return r.default.createElement("sup",null);if("subscript"===e)return r.default.createElement("sub",null);if(0===e.indexOf("color-"))return r.default.createElement("span",{style:{color:"#"+e.split("-")[1]}});if(0===e.indexOf("bgcolor-"))return r.default.createElement("span",{style:{backgroundColor:"#"+e.split("-")[1]}});if(0===e.indexOf("fontsize-"))return r.default.createElement("span",{style:{fontSize:e.split("-")[1]+"px"}});if(0===e.indexOf("fontfamily-")){var n=t.fontFamilies.find(function(t){return t.name.toLowerCase()===e.split("-")[1]});return r.default.createElement("span",{style:{fontFamily:n.family}})}}},s=function(t){return function(e){var n="",r=e.type.toLowerCase(),i=e.data.textAlign;return i&&(n=' style="text-align:'+i+';"'),"atomic"===r?u(e,t):"code-block"===r?{start:"<pre><code"+n+">",end:"</code></pre>"}:o.blocks[r]?{start:"<"+o.blocks[r]+n+">",end:"</"+o.blocks[r]+">"}:void 0}},c=function(t,e){if("link"===t.type.toLowerCase())return r.default.createElement("a",{href:t.data.href,target:t.data.target},e)},f=(e.getToHTMLConfig=function(t){return{styleToHTML:l(t),entityToHTML:c,blockToHTML:s(t.contentState)}},function(t,e,n){if("span"===t&&e.style.color){var r=(0,a.rgbToHex)(e.style.color).replace("#","");return n.add("COLOR-"+r)}if("span"===t&&e.style.backgroundColor){var i=(0,a.rgbToHex)(e.style.color).replace("#","");return n.add("BGCOLOR-"+i)}return"sup"===t?n.add("SUPERSCRIPT"):"sub"===t?n.add("SUBSCRIPT"):"span"===t&&e.style.fontSize?n.add("FONTSIZE-"+parseInt(e.style.fontSize,10)):"span"===t&&"line-through"===e.style.textDecoration?n.add("STRIKETHROUGH"):n}),h=function(t,e){if("a"===t&&!e.querySelectorAll("img").length){var n=e.href,r=e.target;return i.Entity.create("LINK","MUTABLE",{href:n,target:r})}if("audio"===t)return i.Entity.create("AUDIO","IMMUTABLE",{url:e.src});if("video"===t)return i.Entity.create("VIDEO","IMMUTABLE",{url:e.src});if("img"===t){var o=e.parentNode,a=e.src,u=e.width,l=e.height;u=u||"auto",l=l||"auto";var s={url:a,width:u,height:l};return"a"===o.nodeName.toLowerCase()&&(s.link=o.href,s.link_target=o.target),i.Entity.create("IMAGE","IMMUTABLE",s)}},p=function(t,e){var n=e.style||{};return e.classList.contains("media-wrap")?{type:"atomic",data:{float:n.float,alignment:n.textAlign}}:"img"===t?{type:"atomic",data:{float:n.float,alignment:n.textAlign}}:"p"===t&&n.textAlign?{type:"unstyled",data:{textAlign:n.textAlign}}:void 0};e.getFromHTMLConfig=function(t){return{htmlToStyle:f,htmlToEntity:h,htmlToBlock:p}}}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={height:500,language:"zh",controls:["undo","redo","split","font-size","font-family","text-color","bold","italic","underline","strike-through","superscript","subscript","text-align","split","headings","list_ul","list_ol","blockquote","code","split","link","split","media"],addonControls:[],media:{image:!0,video:!1,audio:!0,uploadFn:null,sourceFn:null},colors:["#000000","#333333","#666666","#999999","#cccccc","#ffffff","#61a951","#16a085","#07a9fe","#003ba5","#8e44ad","#f32784","#c0392b","#d35400","#f39c12","#fdda00","#7f8c8d","#2c3e50"],fontSizes:[12,14,16,18,20,24,28,30,32,36,40,48,56,64,72,96,120,144],fontFamilies:[{name:"Araial",family:"Arial, Helvetica, sans-serif"},{name:"Georgia",family:"Georgia, serif"},{name:"Impact",family:"Impact, serif"},{name:"Monospace",family:'"Courier New", Courier, monospace'},{name:"Tahoma",family:"tahoma, arial, 'Hiragino Sans GB', , sans-serif"}]}}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";function t(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function e(){n(this,e),this.items=[]}return i(e,[{key:"setItems",value:function(t){this.items=t||[],this.triggerChange(),this.uploadItems()}},{key:"addItem",value:function(t){this.addItems([t])}},{key:"addItems",value:function(e){this.items=[].concat(t(this.items),t(e)),this.triggerChange(),this.uploadItems()}},{key:"selectItem",value:function(t){this.setItemState(t,{selected:!0})}},{key:"unselectItem",value:function(t){this.setItemState(t,{selected:!1})}},{key:"unselectAllItem",value:function(){this.items=this.items.map(function(t){return r({},t,{selected:!1})}),this.triggerChange()}},{key:"removeItem",value:function(t){this.items=this.items.filter(function(e){return e.id!==t}),this.triggerChange()}},{key:"setItemState",value:function(t,e){this.items=this.items.map(function(n){return n.id===t?r({},n,e):n}),this.triggerChange()}},{key:"uploadItems",value:function(){var t=this;this.items.forEach(function(e,n){if(e.uploading||e.url||e.error)return!1;if("IMAGE"===e.type){var r=URL.createObjectURL(e.file);if(t.createThumbnail(e.id,r),!t.uploadFn)return t.createInlineImage(e.id,r),!1}else if(!t.uploadFn)return t.setItemState(e.id,{error:1}),!1;t.setItemState(e.id,{uploading:!0,uploadProgress:0}),t.uploadFn({file:e.file,libraryId:e.id,success:function(n){t.setItemState(e.id,{file:null,url:n.url,uploadProgress:1,uploading:!1,selected:!0})},progress:function(n){t.setItemState(e.id,{uploading:!0,uploadProgress:n})},error:function(n){t.setItemState(e.id,{uploading:!1,error:2})}})})}},{key:"createThumbnail",value:function(t,e){var n=this;this.compressImage(e,226,226,function(e){n.setItemState(t,{thumbnail:e.url})})}},{key:"createInlineImage",value:function(t,e){var n=this;this.compressImage(e,1280,800,function(e){n.setItemState(t,{url:e.url,uploading:!1,uploadProgress:1,selected:!0})})}},{key:"compressImage",value:function(t,e,n,r){var i=new Image,o=document.createElement("canvas");i.src=t,i.onload=function(){var i=1;if(!(this.width>e||this.height>n))return r({url:t,width:this.width,height:this.height}),!1;i=this.width>this.height?e/this.width:n/this.height,o.width=this.width*i,o.height=this.height*i,o.getContext("2d").drawImage(this,0,0,o.width,o.height),r({url:o.toDataURL("image/png",1),width:o.width,height:o.height})}}},{key:"triggerChange",value:function(t){this.onChange(this.items)}},{key:"onChange",value:function(t){}}]),e}();e.default=o}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(48),i=t(r),o=n(49),a=t(o);e.default={en:i.default,zh:a.default}}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.decorators=e.getCustomStyleMap=e.blockStyleFn=e.customBlockRenderMap=e.getBlockRendererFn=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(0),o=t(i),a=n(8),u=n(51),l=t(u),s=n(52),c=t(s),f=n(50),h=t(f),p=n(56),d=t(p),m=n(57),y=t(m),v=n(55),_=t(v),g=function(t,e){return function(n){var i=n.block.getEntityAt(0),a=n.contentState.getEntity(i),u=a.getData(),s=a.getType(),f=r({},e,{block:t,mediaData:u,entityKey:i});return"IMAGE"===s?o.default.createElement(l.default,f):"AUDIO"===s?o.default.createElement(h.default,f):"VIDEO"===s?o.default.createElement(c.default,f):null}};e.getBlockRendererFn=function(t){return function(e){return"atomic"===e.getType()?{component:g(e,t),editable:!1}:null}},e.customBlockRenderMap=(0,a.Map)({atomic:{element:""}}),e.blockStyleFn=d.default,e.getCustomStyleMap=y.default,e.decorators=_.default}).call(this)}finally{}},function(t,e){t.exports=i},function(t,e,n){"use strict";var r={encode:function(t,e,n){return t+"-"+e+"-"+n},decode:function(t){var e=t.split("-"),n=e[0],r=e[1],i=e[2];return{blockKey:n,decoratorKey:parseInt(r,10),leafKey:parseInt(i,10)}}};t.exports=r},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){m&&p&&(m=!1,p.length?d=p.concat(d):y=-1,d.length&&u())}function u(){if(!m){var t=i(a);m=!0;for(var e=d.length;e;){for(p=d,d=[];++y<e;)p&&p[y].run();y=-1,e=d.length}p=null,m=!1,o(t)}}function l(t,e){this.fun=t,this.array=e}function s(){}var c,f,h=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var p,d=[],m=!1,y=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new l(t,e)),1!==d.length||m||i(u)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=s,h.addListener=s,h.once=s,h.off=s,h.removeListener=s,h.removeAllListeners=s,h.emit=s,h.prependListener=s,h.prependOnceListener=s,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(22);var u=n(0),l=t(u),s=n(1),c=n(3),f=t(c),h=function(t){function e(){var t,n,o,a;r(this,e);for(var u=arguments.length,l=Array(u),c=0;c<u;c++)l[c]=arguments[c];return n=o=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(l))),o.toggleFontFamily=function(t){var e=t.currentTarget.dataset.name,n="FONTFAMILY-"+e,r=o.props,i=r.editorState,a=r.selection,u=r.currentInlineStyle,l=r.fontFamilies,c=l.reduce(function(t,e){return s.Modifier.removeInlineStyle(t,a,"FONTFAMILY-"+e.name)},i.getCurrentContent()),f=s.EditorState.push(i,c,"change-inline-style");a.isCollapsed()&&(f=u.reduce(function(t,e){return s.RichUtils.toggleInlineStyle(t,e)},f)),u.has(n)||(f=s.RichUtils.toggleInlineStyle(f,n)),o.props.onChange(f)},a=n,i(o,a)}return o(e,t),a(e,[{key:"render",value:function(){var t=this,e=null,n=null,r=this.props,i=r.defaultCaption,o=r.currentInlineStyle,a=(r.onChange,r.language),u=r.fontFamilies,s=r.viewWrapper;u.find(function(t,r){return!!o.has("FONTFAMILY-"+t.name)&&(e=t.name,n=r,!0)});var c=0===n;return e=e||i||a.controls.fontFamily,l.default.createElement(f.default,{caption:e,viewWrapper:s,hoverTitle:a.controls.fontFamily,arrowActive:c,className:"control-item dropdown font-family-dropdown"},l.default.createElement("ul",{className:"menu"},u.map(function(e,r){return l.default.createElement("li",{key:r,className:"menu-item "+(r===n?"active":""),"data-name":e.name,onClick:t.toggleFontFamily},l.default.createElement("span",{style:{fontFamily:e.family}},e.name))})))}}]),e}(l.default.Component);e.default=h}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(23);var u=n(0),l=t(u),s=n(1),c=n(3),f=t(c),h=function(t){function e(){var t,n,o,a;r(this,e);for(var u=arguments.length,l=Array(u),c=0;c<u;c++)l[c]=arguments[c];return n=o=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(l))),o.toggleFontSize=function(t){var e=t.target.dataset.size,n="FONTSIZE-"+e,r=o.props,i=r.editorState,a=r.selection,u=r.currentInlineStyle,l=r.fontSizes,c=l.reduce(function(t,e,n){return s.Modifier.removeInlineStyle(t,a,"FONTSIZE-"+e)},i.getCurrentContent()),f=s.EditorState.push(i,c,"change-inline-style");a.isCollapsed()&&(f=u.reduce(function(t,e){return s.RichUtils.toggleInlineStyle(t,e)},f)),u.has(n)||(f=s.RichUtils.toggleInlineStyle(f,n)),o.props.onChange(f)},a=n,i(o,a)}return o(e,t),a(e,[{key:"render",value:function(){var t=this,e=null,n=null,r=this.props,i=r.defaultCaption,o=r.currentInlineStyle,a=(r.onChange,r.language),u=r.fontSizes,s=r.viewWrapper;return u.find(function(t){return!!o.has("FONTSIZE-"+t)&&(e=t+"px",n=t,!0)}),e=e||i||a.controls.fontSize,l.default.createElement(f.default,{caption:e,viewWrapper:s,hoverTitle:a.controls.fontSize,className:"control-item dropdown font-size-dropdown"},l.default.createElement("ul",{className:"font-sizes-wrap"},u.map(function(e,r){return l.default.createElement("li",{key:r,className:e===n?"active":null,"data-size":e,onClick:t.toggleFontSize},e+"px")})))}}]),e}(l.default.Component);e.default=h}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(24);var u=n(0),l=t(u),s=n(10),c=n(3),f=t(c),h=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),a(e,[{key:"render",value:function(){var t=this.props,e=t.current,n=t.onChange,r=t.language,i=t.viewWrapper,o=(0,s.getHeadings)(r),a=o.findIndex(function(t){return t.command===e}),u=o[a]?o[a].title:r.controls.normal,c=0===a;return l.default.createElement(f.default,{caption:u,viewWrapper:i,hoverTitle:r.controls.headings,arrowActive:c,className:"control-item dropdown headings-dropdown"},l.default.createElement("ul",{className:"menu"},o.map(function(t,r){var i=e===t.command;return l.default.createElement("li",{key:r,className:"menu-item"+(i?" active":""),onClick:function(){return n(t.command,t.type)}},t.text)})))}}]),e}(l.default.Component);e.default=h}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(25);var u=n(0),l=t(u),s=n(1),c=n(6),f=n(9),h=t(f),p=n(3),d=t(p),m=function(t){function e(){var t,n,o,a;r(this,e);for(var u=arguments.length,l=Array(u),c=0;c<u;c++)l[c]=arguments[c];return n=o=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(l))),o.state={href:"",target:""},o.dropDownComponent=null,o.handeKeyDown=function(t){if(13===t.keyCode)return o.handleConfirm(),t.preventDefault(),!1},o.inputLink=function(t){o.setState({href:t.target.value})},o.setTarget=function(){o.setState({target:"_blank"===o.state.target?"":"_blank"})},o.handleCancel=function(){o.dropDownComponent.hide()},o.handleUnlink=function(){var t=o.props,e=t.editorState,n=t.selection,r=t.onChange;o.dropDownComponent.hide(),r(s.RichUtils.toggleLink(e,n,null))},o.handleConfirm=function(){var t=o.state,e=t.href,n=t.target;if(0===e.trim().length)return o.handleUnlink(),!1;var r=o.props,i=r.editorState,a=r.contentState,u=r.onChange,l=r.selection,c=a.createEntity("LINK","MUTABLE",{href:e,target:n}),f=c.getLastCreatedEntityKey(),h=s.EditorState.set(i,{currentContent:c});h=s.RichUtils.toggleLink(h,h.getSelection(),f),h=s.EditorState.forceSelection(h,l.merge({anchorOffset:l.getEndOffset(),focusOffset:l.getEndOffset()})),h=s.EditorState.push(h,s.Modifier.insertText(h.getCurrentContent(),h.getSelection()," "),"insert-text"),u(h),o.dropDownComponent.hide()},a=n,i(o,a)}return o(e,t),a(e,[{key:"componentWillReceiveProps",value:function(t){var e=t.contentState,n=t.editorState;if(n&&this.props.editorState!==n){var r=(0,c.getSelectionEntity)(n);if(r){var i=e.getEntity(r);if(i&&"LINK"===i.get("type")){var o=i.getData(),a=o.href,u=o.target;this.setState({href:a,target:u})}else this.setState({href:"",target:""})}else this.setState({href:"",target:""})}}},{key:"render",value:function(){var t=this,e=this.state,n=e.href,r=e.target,i=this.props,o=(i.editorState,i.contentState),a=i.selection,u=i.language,s=i.viewWrapper,c=l.default.createElement("i",{className:"icon-link"}),f=a.getAnchorKey(),p=o.getBlockForKey(f).getType(),m=!a.isCollapsed()&&"atomic"!==p;return l.default.createElement("div",{className:"control-item-group"},l.default.createElement(d.default,{caption:c,hoverTitle:u.controls.link,hideOnBlur:!1,viewWrapper:s,showDropDownArrow:!1,disabled:!m,ref:function(e){return t.dropDownComponent=e},className:"control-item dropdown link-editor-dropdown"},l.default.createElement("div",{className:"link-editor"},l.default.createElement("div",{className:"input-group"},l.default.createElement("input",{type:"text",value:n,spellCheck:!1,placeholder:u.linkEditor.inputPlaceHolder,onKeyDown:this.handeKeyDown,onChange:this.inputLink})),l.default.createElement("div",{className:"switch-group"},l.default.createElement(h.default,{active:"_blank"===r,onClick:this.setTarget}),l.default.createElement("label",null,u.linkEditor.openInNewWindow)),l.default.createElement("div",{className:"buttons"},l.default.createElement("a",{onClick:this.handleUnlink,className:"primary pull-left",href:"javascript:void(0);"},l.default.createElement("i",{className:"icon-close"}),l.default.createElement("span",null,u.linkEditor.removeLink)),l.default.createElement("button",{onClick:this.handleConfirm,className:"primary pull-right"},u.base.confirm),l.default.createElement("button",{onClick:this.handleCancel,className:"default pull-right"},u.base.cancel)))),l.default.createElement("button",{title:u.controls.unlink,className:"control-item button",onClick:this.handleUnlink,disabled:!m||!n},l.default.createElement("i",{className:"icon-link-off"})))}}]),e}(l.default.Component);e.default=m}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(26);var l=n(0),s=t(l),c=n(1),f=n(44),h=t(f),p=n(2),d=n(4),m="image/png,image/jpeg,image/gif,image/webp,image/apng,image/svg",y="video/mp4",v="audio/mp3",_=function(t){function e(){var t,n,o,u;r(this,e);for(var l=arguments.length,s=Array(l),f=0;f<l;f++)s[f]=arguments[f];return n=o=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),o.state={visible:!1,showExternalForm:!1,draging:!1,error:!1,confirmable:!1,external:{url:"",type:[o.props.media.image?"IMAGE":null,o.props.media.video?"VIDEO":null,o.props.media.audio?"AUDIO":null].filter(function(t){return t})[0]},files:[]},o.mediaFileAccept=[o.props.media.image?m:null,o.props.media.video?y:null,o.props.media.audio?v:null].filter(function(t){return t}).join(","),o.toggleFileSelected=function(t){var e=t.id,n=t.selected,r=t.error,i=t.uploading;if(r||i)return!1;n=!n,o.mediaLibrary.setItemState(e,{selected:n})},o.removeFileItem=function(t){o.mediaLibrary.removeItem(t.target.dataset.id),t.stopPropagation()},o.handleDragLeave=function(t){o.setState({draging:!1})},o.handleDragEnter=function(t){o.setState({draging:!0})},o.handleFilesPicked=function(t){var e=t.target.files,n=e.length;t.persist();!function r(i){if(i<n){var a={id:(new Date).getTime()+"_"+(0,p.UniqueIndex)(),file:e[i],name:e[i].name,size:e[i].size,uploadProgress:0,uploading:!1,selected:!1,error:0};0===e[i].type.indexOf("image/")&&o.props.media.image?(a.type="IMAGE",o.mediaLibrary.addItems([a])):0===e[i].type.indexOf("video/")&&o.props.media.video?(a.type="VIDEO",o.mediaLibrary.addItems([a])):0===e[i].type.indexOf("audio/")&&o.props.media.audio&&(a.type="AUDIO",o.mediaLibrary.addItems([a])),setTimeout(function(){r(i+1)},100)}else t.target.value=null}(0)},o.inputExternal=function(t){o.setState({external:a({},o.state.external,{url:t.target.value})})},o.switchExternalType=function(t){o.setState({external:a({},o.state.external,{type:t.target.dataset.type})})},o.confirmAddExternal=function(t){if(13===t.keyCode){var e=o.state.external,n=e.url,r=e.type;n=n.split("|");var i=n.length>1?n[0]:o.props.language.mediaPicker.unnamedItem;n=n.length>1?n[1]:n[0];var a="IMAGE"===r?n:null;o.mediaLibrary.addItems([{thumbnail:a,url:n,name:i,type:r,id:(new Date).getTime()+"_"+(0,p.UniqueIndex)(),uploading:!1,uploadProgress:1,selected:!0}]),o.setState({showExternalForm:!1,external:{url:"",type:"IMAGE"}})}},o.toggleExternalMode=function(){o.setState({showExternalForm:!o.state.showExternalForm})},o.confirmInsertMedia=function(){var t=o.props,e=t.editorState,n=t.contentState,r=t.selection,i=t.onChange,a=o.state.files.filter(function(t){return t.selected});if(0===a.length)return!1;var u=e,l=r.getAnchorKey();l&&"atomic"===n.getBlockForKey(l).getType()&&(u=(0,d.selectNextBlock)(e,l)),a.forEach(function(t){var e={url:t.url,name:t.name,type:t.type,meta:t.meta},r=n.createEntity(t.type,"IMMUTABLE",e),i=r.getLastCreatedEntityKey();u=c.AtomicBlockUtils.insertAtomicBlock(u,i," ")}),i(u),o.hide()},o.show=function(){o.setState({visible:!0})},o.hide=function(){o.setState({visible:!1},function(){o.mediaLibrary.unselectAllItem()})},u=n,i(o,u)}return o(e,t),u(e,[{key:"componentDidMount",value:function(){var t=this;this.mediaLibrary=this.props.mediaLibrary,this.mediaLibrary.uploadFn=this.props.media.uploadFn||null,this.mediaLibrary.onChange=function(e){t.setState({files:e,confirmable:!!e.filter(function(t){return t.selected}).length})}}},{key:"render",value:function(){var t=this.props,e=(t.media,t.language),n=this.state,r=n.files,i=n.visible,o=n.external,a=n.draging,u=n.confirmable,l=n.showExternalForm,c=s.default.createElement("span",{onClick:this.toggleExternalMode,className:"braft-media-toggle-external-mode"},l?s.default.createElement("span",null,s.default.createElement("i",{className:"icon-add"})," ",e.mediaPicker.addLocalFile):s.default.createElement("span",null,s.default.createElement("i",{className:"icon-add"})," ",e.mediaPicker.addExternalSource));return s.default.createElement(h.default,{title:e.mediaPicker.caption,width:640,height:480,visible:i,language:e,className:"braft-media-picker-modal",showClose:!0,showCancel:!0,bottomText:c,confirmable:u&&!l,onClose:this.hide,onCancel:this.hide,onConfirm:this.confirmInsertMedia},s.default.createElement("div",{className:"braft-media-picker"},s.default.createElement("div",{className:"braft-media-uploader"},r.length?s.default.createElement("div",{className:"braft-media-list-wrap"},this.buildMediaList()):s.default.createElement("div",{onDragEnter:this.handleDragEnter,onDragLeave:this.handleDragLeave,className:"braft-media-drag-uploader "+(a?"active":"")},s.default.createElement("span",{className:"braft-media-drag-tip"},s.default.createElement("input",{accept:this.mediaFileAccept,onChange:this.handleFilesPicked,multiple:!0,type:"file"}),a?e.mediaPicker.dropTip:e.mediaPicker.dragTip)),l?s.default.createElement("div",{className:"braft-media-add-external"},s.default.createElement("div",{className:"braft-media-external-form"},s.default.createElement("input",{onKeyDown:this.confirmAddExternal,value:o.url,onChange:this.inputExternal,placeholder:e.mediaPicker.externalInputPlaceHolder}),s.default.createElement("div",{"data-type":o.type,className:"braft-media-switch-external-type"},s.default.createElement("button",{onClick:this.switchExternalType,"data-type":"IMAGE"},e.media.image),s.default.createElement("button",{onClick:this.switchExternalType,"data-type":"VIDEO"},e.media.video),s.default.createElement("button",{onClick:this.switchExternalType,"data-type":"AUDIO"},e.media.audio)),s.default.createElement("span",{className:"braft-media-external-tip"},e.mediaPicker.externalInputTip))):null)))}},{key:"buildMediaList",value:function(){var t=this;return s.default.createElement("ul",{className:"braft-media-list"},s.default.createElement("li",{className:"braft-media-add-item"},s.default.createElement("i",{className:"icon-add"}),s.default.createElement("input",{accept:this.mediaFileAccept,onChange:this.handleFilesPicked,multiple:!0,type:"file"})),this.state.files.map(function(e,n){var r=null,i=e.uploading?s.default.createElement("div",{className:"braft-media-item-uploading"},s.default.createElement("div",{className:"braft-media-item-uploading-bar",style:{width:e.uploadProgress/1+"%"}})):"";switch(e.type){case"IMAGE":r=s.default.createElement("div",{className:"braft-media-image"},i,s.default.createElement("img",{src:e.thumbnail}));break;case"VIDEO":r=s.default.createElement("div",{className:"braft-media-icon braft-media-video",title:e.url},i,s.default.createElement("i",{className:"icon-film"}),s.default.createElement("span",null,e.name||e.url));break;case"AUDIO":r=s.default.createElement("div",{className:"braft-media-icon braft-media-audio",title:e.url},i,s.default.createElement("i",{className:"icon-music"}),s.default.createElement("span",null,e.name||e.url));break;default:r=s.default.createElement("a",{className:"braft-media-icon braft-media-file",title:e.url,href:e.url},i,s.default.createElement("i",{className:"icon-file-text"}),s.default.createElement("span",null,e.name||e.url))}var o=["braft-media-item"];return e.selected&&o.push("active"),e.uploading&&o.push("uploading"),e.error&&o.push("error"),s.default.createElement("li",{key:n,title:e.name,className:o.join(" "),onClick:function(){return t.toggleFileSelected(e)}},r,s.default.createElement("span",{"data-id":e.id,onClick:t.removeFileItem,className:"braft-media-item-remove icon-close"}),s.default.createElement("span",{className:"braft-media-item-title"},e.name))}))}}]),e}(s.default.Component);e.default=_}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(a),l=(n(1),n(6)),s=function(e){function n(){var e,i,o,a;t(this,n);for(var u=arguments.length,s=Array(u),c=0;c<u;c++)s[c]=arguments[c];return i=o=r(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(s))),o.state={currentAlignment:void 0},o.setAlignment=function(t){var e=t.target.dataset.alignment,n=o.props,r=n.editorState,i=n.onChange;i(e!==o.state.currentAlignment?(0,l.setBlockData)(r,{textAlign:e}):(0,l.setBlockData)(r,{textAlign:void 0}))},a=i,r(o,a)}return i(n,e),o(n,[{key:"componentWillReceiveProps",value:function(t){this.props.editorState!==t.editorState&&this.setState({currentAlignment:(0,l.getSelectedBlocksMetadata)(t.editorState).get("textAlign")})}},{key:"render",value:function(){var t=this,e=this.state.currentAlignment,n=this.props.language,r=[n.controls.alignLeft,n.controls.alignCenter,n.controls.alignRight,n.controls.alignJustify];return u.default.createElement("div",{className:"control-item-group"},["left","center","right","justify"].map(function(n,i){return u.default.createElement("button",{key:i,title:r[i],"data-alignment":n,className:"control-item button "+(n===e?"active":null),onClick:t.setAlignment},u.default.createElement("i",{className:"icon-align-"+n}))}))}}]),n}(u.default.Component);e.default=s}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(27);var u=n(0),l=t(u),s=n(1),c=n(2),f=n(3),h=t(f),p=n(43),d=t(p),m=function(t){function e(){var t,n,o,a;r(this,e);for(var u=arguments.length,l=Array(u),f=0;f<u;f++)l[f]=arguments[f];return n=o=i(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(l))),o.state={colorType:"color"},o.dropDown={},o.dropDownId="BRAFT-DROPDOWN-"+(0,c.UniqueIndex)(),o.switchColorType=function(t){o.setState({colorType:t.target.dataset.type})},o.toggleColor=function(t){var e="color"===o.state.colorType?"COLOR-":"BGCOLOR-",n=e+t,r=o.props,i=r.editorState,a=r.selection,u=r.currentInlineStyle,l=r.colors,c=l.reduce(function(t,n,r){return s.Modifier.removeInlineStyle(t,a,e+n.replace("#",""))},i.getCurrentContent()),f=s.EditorState.push(i,c,"change-inline-style");a.isCollapsed()&&(f=u.reduce(function(t,e){return s.RichUtils.toggleInlineStyle(t,e)},f)),u.has(n)||(f=s.RichUtils.toggleInlineStyle(f,n)),o.props.onChange(f),o.dropDown.hide()},a=n,i(o,a)}return o(e,t),a(e,[{key:"render",value:function(){var t=this,e={},n=null,r=this.state.colorType,i=this.props,o=i.currentInlineStyle,a=(i.onChange,i.language),u=i.colors,s=i.viewWrapper;u.forEach(function(t,i){var a=t.replace("#","");o.has("COLOR-"+a)&&(e.color=t,"color"===r&&(n=i)),o.has("BGCOLOR-"+a)&&(e.backgroundColor=t,"backgroundColor"===r&&(n=i))});var c=l.default.createElement("i",{style:e,className:"icon-text-color"},l.default.createElement("span",{className:"path1"}),l.default.createElement("span",{className:"path2"}));return l.default.createElement(h.default,{caption:c,hoverTitle:a.controls.color,showDropDownArrow:!1,viewWrapper:s,componentId:this.dropDownId,ref:function(e){return t.dropDown=e},className:"control-item dropdown text-color-dropdown"},l.default.createElement("div",{className:"text-color-picker-wrap"},l.default.createElement("div",{className:"switch-buttons"},l.default.createElement("button",{"data-type":"color","data-keep-active":!0,"data-braft-component-id":this.dropDownId,className:"color"===r?"active":"",onClick:this.switchColorType},a.controls.textColor),l.default.createElement("button",{"data-type":"backgroundColor","data-keep-active":!0,"data-braft-component-id":this.dropDownId,className:"backgroundColor"===r?"active":"",onClick:this.switchColorType},a.controls.backgroundColor)),l.default.createElement(d.default,{width:200,current:n,disableAlpha:!0,colors:u,onChange:this.toggleColor})))}}]),e}(l.default.Component);e.default=m}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(28);var a=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(a),l=function(e){function n(){var e,i,o,a;t(this,n);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return i=o=r(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(l))),o.handleChange=function(t){o.props.onChange(t.currentTarget.dataset.color)},a=i,r(o,a)}return i(n,e),o(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.current,r=e.colors;e.onChange;return u.default.createElement("ul",{className:"braft-color-list"},r.map(function(e,r){var i=r===n?"color-item active":"color-item";return u.default.createElement("li",{key:r,title:e,className:i,style:{color:e},"data-index":r,"data-color":e.replace("#",""),onClick:t.handleChange})}))}}]),n}(u.default.Component);e.default=l}).call(this)}finally{}},function(t,e,n){(function(t){try{(function(){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(30);var l=n(0),s=r(l),c=n(7),f=r(c),h=n(2),p=window.$||document.querySelector.bind(document),d=function(e){function n(){var t,e,r,a;i(this,n);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return e=r=o(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(l))),r.componentId="BRAFT-MODAL-"+(0,h.UniqueIndex)(),r.rootElement=p("#"+r.componentId),r.state={visible:!1},r.handleTransitionEnd=function(){r.rootElement.classList.contains("active")||f.default.unmountComponentAtNode(r.rootElement)},r.handleCancel=function(){r.props.onCancel&&r.props.onCancel()},r.handleConfirm=function(){r.props.onConfirm&&r.props.onConfirm()},r.close=function(){r.props.onClose&&r.props.onClose()},a=e,o(r,a)}return a(n,e),u(n,[{key:"componentDidMount",value:function(){this.props.visible&&this.setState({visible:!0}),this.rootElement||(this.rootElement=document.createElement("div"),this.rootElement.id=this.componentId,this.rootElement.className="braft-modal-root",document.body.appendChild(this.rootElement))}},{key:"componentWillReceiveProps",value:function(t){this.props.visible&&!t.visible?this.unrenderComponent():(this.props.visible||t.visible)&&this.renderComponent(t)}},{key:"render",value:function(){return null}},{key:"unrenderComponent",value:function(){this.rootElement.classList.remove("active")}},{key:"renderComponent",value:function(e){var n=this,r=e.title,i=e.className,o=e.width,a=e.height,u=e.children,l=e.confirmable,c=e.showCancel,h=e.showClose,p=e.bottomText,d=e.language,m=s.default.createElement("div",{className:"braft-modal "+(i||"")},s.default.createElement("div",{className:"braft-modal-mask"}),s.default.createElement("div",{onTransitionEnd:this.handleTransitionEnd,style:{width:o,height:a},className:"braft-modal-content"},s.default.createElement("div",{className:"braft-modal-header"},s.default.createElement("h3",{className:"braft-modal-caption"},r),h&&s.default.createElement("button",{onClick:this.close,className:"braft-modal-close-button"},s.default.createElement("i",{className:"icon-close"}))),s.default.createElement("div",{className:"braft-modal-body"},u),s.default.createElement("div",{className:"braft-modal-footer"},s.default.createElement("div",{className:"braft-modal-addon-text"},p),s.default.createElement("div",{className:"braft-modal-buttons"},c&&s.default.createElement("button",{onClick:this.handleCancel,className:"braft-modal-cancel"},d.base.cancel),s.default.createElement("button",{onClick:this.handleConfirm,className:"braft-modal-confirm "+(l?"":"disabled")},d.base.confirm)))));f.default.render(m,this.rootElement),t(function(){n.rootElement.classList.add("active")})}}]),n}(s.default.Component);e.default=d}).call(this)}finally{}}).call(e,n(5).setImmediate)},function(t,e,n){try{(function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(0),r=function(t){return t&&t.__esModule?t:{default:t}}(t);e.default=function(t){return[{key:"undo",title:t.controls.undo,text:r.default.createElement("i",{className:"icon-undo"}),type:"editor-state-method",command:"undo"},{key:"redo",title:t.controls.redo,text:r.default.createElement("i",{className:"icon-redo"}),type:"editor-state-method",command:"redo"},{key:"bold",title:t.controls.bold,text:r.default.createElement("i",{className:"icon-bold"}),type:"inline-style",command:"bold"},{key:"italic",title:t.controls.italic,text:r.default.createElement("i",{className:"icon-italic"}),type:"inline-style",command:"italic"},{key:"underline",title:t.controls.underline,text:r.default.createElement("i",{className:"icon-underlined"}),type:"inline-style",command:"underline"},{key:"strike-through",title:t.controls.strikeThrough,text:r.default.createElement("i",{className:"icon-strikethrough"}),type:"inline-style",command:"strikethrough"},{key:"superscript",title:t.controls.superScript,text:r.default.createElement("i",{className:"icon-superscript"}),type:"inline-style",command:"superscript"},{key:"subscript",title:t.controls.subScript,text:r.default.createElement("i",{className:"icon-subscript"}),type:"inline-style",command:"subscript"},{key:"headings",title:t.controls.headings,type:"headings"},{key:"blockquote",title:t.controls.blockQuote,text:r.default.createElement("i",{className:"icon-quote"}),type:"block-type",command:"blockquote"},{key:"code",title:t.controls.code,text:r.default.createElement("i",{className:"icon-code"}),type:"block-type",command:"code-block"},{key:"list_ul",title:t.controls.unorderedList,text:r.default.createElement("i",{className:"icon-list"}),type:"block-type",command:"unordered-list-item"},{key:"list_ol",title:t.controls.orderedList,text:r.default.createElement("i",{className:"icon-list-numbered"}),type:"block-type",command:"ordered-list-item"},{key:"link",title:t.controls.link,type:"link"},{key:"text-color",title:t.controls.color,type:"text-color"},{key:"font-size",title:t.controls.fontSize,type:"font-size"},{key:"font-family",title:t.controls.fontFamily,type:"font-family"},{key:"text-align",title:t.controls.textAlign,type:"text-align"},{key:"media",title:t.controls.media,text:r.default.createElement("i",{className:"icon-media"}),type:"media"}]}}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=n(2),r=[],i=!1,o=!1;e.default={resolve:function(e){var n=(0,t.UniqueIndex)();return r.push({id:n,eventHandler:e}),n},unresolve:function(t){r=r.filter(function(e){return e.id!==t})}},i||(window.addEventListener("resize",function(t){clearTimeout(o),o=setTimeout(function(){r.map(function(e){"function"==typeof e.eventHandler&&e.eventHandler(t)}),o=!1},100)}),i=!0)}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(11),n(12);var s=n(0),c=t(s),f=n(7),h=(t(f),n(17)),p=t(h),d=n(1),m=n(19),y=n(4),v=n(14),_=n(15),g=t(_),b=n(18),w=n(13),E=t(w),S=n(16),k=t(S),I=new d.CompositeDecorator(b.decorators),O=d.DefaultDraftBlockRenderMap.merge(b.customBlockRenderMap),C=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));x.call(n);var r=void 0,a=n.props,u=a.initialContent,l=a.contentFormat;if(l=l||"raw",u=u||""){var s=void 0;"html"===l?s=(0,m.convertFromHTML)((0,v.getFromHTMLConfig)())(u):"raw"===l&&(s=(0,d.convertFromRaw)(u)),r=d.EditorState.createWithContent(s,I)}else r=d.EditorState.createEmpty(I);return n.readyForSync=!0,n.state={editorState:r,editorProps:{}},n.mediaLibrary=new k.default,n}return a(e,t),l(e,[{key:"render",value:function(){var t=this,e=this.props,n=e.controls,r=e.height,i=e.media,o=e.addonControls,a=e.language,l=e.colors,s=e.fontSizes,f=e.fontFamilies,h=e.viewWrapper,m=e.placeholder,y=this.state.editorState.getCurrentContent();i=u({},g.default.media,i),n=n||g.default.controls,o=o||g.default.addonControls,a=p.default[a]||p.default[g.default.language],l=l||g.default.colors,s=s||g.default.fontSizes,f=f||g.default.fontFamilies,r=r||g.default.height,i.uploadFn||(i.video=!1,i.audio=!1);var v={onChange:this.onChange,editorState:this.state.editorState,editor:this.draftInstance,mediaLibrary:this.mediaLibrary,media:i,controls:n,contentState:y,language:a,viewWrapper:h,addonControls:o,colors:l,fontSizes:s,fontFamilies:f},_=(0,b.getBlockRendererFn)({onChange:this.onChange,editorState:this.state.editorState,getEditorState:this.getEditorState,forceRender:this.forceRender,setEditorProp:this.setEditorProp,language:a,contentState:y,viewWrapper:h}),w=(0,b.getCustomStyleMap)({colors:l,fontSizes:s,fontFamilies:f}),S=u({ref:function(e){return t.draftInstance=e},editorState:this.state.editorState,handleKeyCommand:this.handleKeyCommand,handleReturn:this.handleReturn,handlePastedText:this.handlePastedText,onChange:this.onChange,customStyleMap:w,blockStyleFn:b.blockStyleFn,blockRendererFn:_,blockRenderMap:O,placeholder:m},this.state.editorProps);return c.default.createElement("div",{className:"BraftEditor-container"},c.default.createElement(E.default,v),c.default.createElement("div",{className:"BraftEditor-content",style:{height:r}},c.default.createElement(d.Editor,S)))}}]),e}(c.default.Component),x=function(){var t=this;this.onChange=function(e){t.setState({editorState:e},function(){clearTimeout(t.syncTimer),t.syncTimer=setTimeout(function(){var e=t.props,n=e.onChange,r=e.onRawChange,i=e.onHTMLChange;n&&n(t.getContent()),i&&i(t.getHTMLContent()),r&&r(t.getRawContent())},300)})},this.getHTMLContent=function(){return t.getContent("html")},this.getRawContent=function(){return t.getContent("raw")},this.getContent=function(e){e=e||t.props.contentFormat||"raw";var n=t.getContentState(),r=t.props,i=r.colors,o=r.fontSizes,a=r.fontFamilies;return i=i||g.default.colors,o=o||g.default.fontSizes,a=a||g.default.fontFamilies,"html"===e?(0,m.convertToHTML)((0,v.getToHTMLConfig)({contentState:n,colors:i,fontSizes:o,fontFamilies:a}))(n):(0,d.convertToRaw)(t.getContentState())},this.getContentState=function(){return t.getEditorState().getCurrentContent()},this.getEditorState=function(){return t.state.editorState},this.getDraftInstance=function(){return t.draftInstance},this.getMediaLibraryInstance=function(){return t.mediaLibrary},this.setContent=function(e,n){var r=void 0,i=t.props.contentFormat;i=n||i||"raw","html"===i?r=(0,m.convertFromHTML)((0,v.getFromHTMLConfig)())(e):"raw"===i&&(r=(0,d.convertFromRaw)(e)),t.setState({editorState:d.EditorState.createWithContent(r,I)})},this.setEditorProp=function(e,n){var i=u({},t.state.editorProps,r({},e,n));t.setState({editorProps:i})},this.forceRender=function(){var e=t.state.editorState,n=e.getCurrentContent(),r=d.EditorState.createWithContent(n,I);t.setState({editorState:r})},this.handleKeyCommand=function(e){var n=d.RichUtils.handleKeyCommand(t.state.editorState,e);return!!n&&(t.onChange(n),!0)},this.handleReturn=function(e){var n=(0,y.checkReturn)(t.state.editorState,e);return!!n&&(t.onChange(n),!0)},this.handlePastedText=function(e,n){if(!n)return!1;var r=t.state.editorState,i=(0,m.convertFromHTML)((0,v.getFromHTMLConfig)())(n||e).blockMap,o=d.Modifier.replaceWithFragment(r.getCurrentContent(),r.getSelection(),i);return t.onChange(d.EditorState.push(r,o,"insert-fragment")),!0}};e.default=C}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={base:{remove:"Remove",cancel:"Cancel",confirm:"Confirm",inert:"Insert"},controls:{undo:"Undo",redo:"Redo",fontSize:"Font Size",color:"Color",textColor:"Text",backgroundColor:"Background",bold:"Bold",italic:"Italic",underline:"Underline",strikeThrough:"Strike Through",fontFamily:"Font Family",textAlign:"Text Alignment",alignLeft:"Left Alignment",alignCenter:"Center Alignment",alignRight:"Right Alignment",alignJustify:"Justify Alignment",floatLeft:"Left Float",floatRight:"Right Float",superScript:"Super Script",subScript:"Sub Script",headings:"Headings",header:"Header",normal:"Normal",orderedList:"Ordered List",unorderedList:"Unordered List",blockQuote:"Quote",code:"Code",link:"Link",unlink:"Unlink",media:"Media"},linkEditor:{inputPlaceHolder:"Input link URL",inputWithEnterPlaceHolder:"Input link URL and press Enter",openInNewWindow:"Open in new window",removeLink:"Remove Link"},media:{image:"Image",video:"Video",audio:"Audio"},mediaPicker:{caption:"Media Library",dragTip:"Click Or Drag Files Here",dropTip:"Drop To Upload",externalInputPlaceHolder:"Source Name|Source URL",externalInputTip:'Split source name and source URL with "|", confirm by hit Enter.',addLocalFile:"Add from local",addExternalSource:"Add from Internet",unnamedItem:"Unnamed Item"}}}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={base:{remove:"",cancel:"",confirm:"",inert:""},controls:{undo:"",redo:"",fontSize:"",color:"",textColor:"",backgroundColor:"",bold:"",italic:"",underline:"",strikeThrough:"",fontFamily:"",textAlign:"",alignLeft:"",alignCenter:"",alignRight:"",alignJustify:"",floatLeft:"",floatRight:"",superScript:"",subScript:"",headings:"",header:"",normal:"",orderedList:"",unorderedList:"",blockQuote:"",code:"",link:"",unlink:"",media:""},linkEditor:{inputPlaceHolder:"",inputWithEnterPlaceHolder:"",openInNewWindow:"",removeLink:""},media:{image:"",video:"",audio:""},mediaPicker:{caption:"",dragTip:"",dropTip:"",externalInputPlaceHolder:"|",externalInputTip:'("|")',addLocalFile:"",addExternalSource:"",unnamedItem:""}}}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(32);var a=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(a),l=function(e){function n(){return t(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,e),o(n,[{key:"render",value:function(){var t=this.props.mediaData,e=t.url,n=(t.width,t.height,t.name);return u.default.createElement("div",{className:"braft-media-audio-holder"},u.default.createElement("i",{className:"icon-music"}),u.default.createElement("h5",null,n),u.default.createElement("h6",null,e))}}]),n}(u.default.Component);e.default=l}).call(this)}finally{}},function(t,e,n){(function(t){try{(function(){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(33);var l=n(0),s=r(l),c=(n(8),n(1)),f=n(6),h=n(4),p=n(9),d=r(p),m=function(e){function n(){var e,r,a,u;i(this,n);for(var l=arguments.length,s=Array(l),p=0;p<l;p++)s[p]=arguments[p];return r=a=o(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(s))),a.state={toolbarVisbile:!1,toolbarOffset:0,linkEditorVisible:!1},a.removeImage=function(t){var e=a.props,n=e.block,r=e.getEditorState;(0,e.onChange)((0,h.removeBlock)(r(),n)),a.props.setEditorProp("readOnly",!1)},a.toggleLinkEditor=function(){a.setState({linkEditorVisible:!a.state.linkEditorVisible})},a.setImageLink=function(e){if(13===e.keyCode){var n=e.currentTarget.value.trim(),r=a.props,i=r.entityKey,o=r.contentState,u=r.editorState,l=r.onChange;o.mergeEntityData(i,{link:n}),l(c.EditorState.push(u,o,"change-block-data")),t(a.props.forceRender)}},a.setImageFloat=function(t){var e=t.currentTarget.dataset.float,n=a.props,r=n.block,i=n.getEditorState,o=(n.contentState,n.onChange);r.getData().get("float")===e&&(e=null),o((0,f.setBlockData)((0,h.selectBlock)(i(),r),{float:e})),a.props.setEditorProp("readOnly",!1)},a.setImageAlignment=function(t){var e=t.currentTarget.dataset.alignment,n=a.props,r=n.block,i=n.getEditorState,o=(n.contentState,n.onChange);r.getData().get("alignment")===e&&(e=null),o((0,f.setBlockData)((0,h.selectBlock)(i(),r),{alignment:e})),a.props.setEditorProp("readOnly",!1)},a.showToolbar=function(){a.state.toolbarVisbile||a.setState({toolbarVisbile:!0},function(){a.props.setEditorProp("readOnly",!0),a.setState({toolbarOffset:a.calcToolbarOffset()})})},a.hideToolbar=function(){a.setState({toolbarVisbile:!1},function(){a.props.setEditorProp("readOnly",!1)})},u=r,o(a,u)}return a(n,e),u(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.mediaData,r=e.language,i=this.state,o=i.toolbarVisbile,a=i.toolbarOffset,u=i.linkEditorVisible,l=this.props.block.getData(),c=l.get("float"),f=l.get("alignment"),h=n.url,p=n.link,m=n.link_target,y=n.width,v=n.height,_={},g=!1;return c?f=null:"left"===f?(_.float="left",g=!0):"right"===f?(_.float="right",g=!0):"center"===f?_.textAlign="center":(_.float="left",g=!0),s.default.createElement("div",{className:"braft-media-embeder"},s.default.createElement("div",{style:_,className:"braft-embed-image",onMouseOver:this.showToolbar,onMouseLeave:this.hideToolbar},o&&s.default.createElement("div",{style:{marginLeft:a},ref:function(e){return t.toolbarElement=e},"data-float":c,"data-alignment":f,className:"braft-embed-image-toolbar"},u&&s.default.createElement("div",{onClick:this.preventDefault,className:"braft-embed-image-link-editor"},s.default.createElement("input",{type:"text",placeholder:r.linkEditor.inputWithEnterPlaceHolder,onKeyDown:this.setImageLink,defaultValue:p}),s.default.createElement("div",{className:"switch-group"},s.default.createElement(d.default,{active:"_blank"===m,onClick:function(){return t.setImageLinkTarget(m)}}),s.default.createElement("label",null,r.linkEditor.openInNewWindow))),s.default.createElement("a",{"data-float":"left",onClick:this.setImageFloat},""),s.default.createElement("a",{"data-float":"right",onClick:this.setImageFloat},""),s.default.createElement("a",{"data-alignment":"left",onClick:this.setImageAlignment},""),s.default.createElement("a",{"data-alignment":"center",onClick:this.setImageAlignment},""),s.default.createElement("a",{"data-alignment":"right",onClick:this.setImageAlignment},""),s.default.createElement("a",{className:p?"active":"",onClick:this.toggleLinkEditor},""),s.default.createElement("a",{onClick:this.removeImage},""),s.default.createElement("i",{style:{marginLeft:-1*a},className:"braft-embed-image-toolbar-arrow"})),s.default.createElement("img",{ref:function(e){return t.imageElement=e},src:h,width:y,height:v})),g&&s.default.createElement("div",{className:"clearfix",style:{clear:"both",height:0,lineHeight:0,float:"none"}}))}},{key:"calcToolbarOffset",value:function(){var t=null;t=this.props.viewWrapper?document.querySelector(this.props.viewWrapper).getBoundingClientRect():document.body.getBoundingClientRect();var e=this.toolbarElement.getBoundingClientRect(),n=this.imageElement.getBoundingClientRect(),r=n.right-n.width/2+e.width/2,i=n.left+n.width/2-e.width/2;return r=t.right-r,i-=t.left,r<10?r-10:i<10?-1*i+10:0}},{key:"setImageLinkTarget",value:function(e){var n=this.props,r=n.entityKey,i=n.contentState,o=n.editorState,a=n.onChange;e="_blank"===e?"":"_blank",i.mergeEntityData(r,{link_target:e}),a(c.EditorState.push(o,i,"change-block-data")),t(this.props.forceRender)}}]),n}(s.default.Component);e.default=m}).call(this)}finally{}}).call(e,n(5).setImmediate)},function(t,e,n){try{(function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(34);var a=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(a),l=function(e){function n(){return t(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,e),o(n,[{key:"render",value:function(){var t=this.props.mediaData,e=t.url,n=(t.width,t.height,t.name);return u.default.createElement("div",{className:"braft-media-video-holder"},u.default.createElement("i",{className:"icon-film"}),u.default.createElement("h5",null,n),u.default.createElement("h6",null,e))}}]),n}(u.default.Component);e.default=l}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";function t(t,e,n){t.findEntityRanges(function(t){var e=t.getEntity();return null!==e&&"IMAGE"===n.getEntity(e).getType()},e)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=function(t){var e=t.entityKey,n=t.contentState,r=n.getEntity(e).getData(),o=r.src,a=r.width,u=r.height;return i.default.createElement("img",{src:o,width:a,height:u})};e.default={strategy:t,component:o}}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";function t(t,e,n){t.findEntityRanges(function(t){var e=t.getEntity();return null!==e&&"LINK"===n.getEntity(e).getType()},e)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=function(t){var e=t.children,n=t.entityKey,r=t.contentState,o=r.getEntity(n).getData(),a=o.href,u=o.target;return i.default.createElement("span",null,i.default.createElement("a",{className:"braft-link",href:a,target:u},e))};e.default={strategy:t,component:o}}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(54),i=t(r),o=n(53),a=t(o);e.default=[i.default,a.default]}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";function t(t){var e=t.getData()&&t.getData().get("textAlign"),n=t.getData()&&t.getData().get("float"),r=null;return e&&(r="braft-"+e+"-aligned-block"),n&&(r+=" braft-float-"+n),r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t}).call(this)}finally{}},function(t,e,n){try{(function(){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function(e){var n={},r={},i={},o={};return e.colors.forEach(function(t){var e=t.replace("#","");n["COLOR-"+e]={color:t},r["BGCOLOR-"+e]={backgroundColor:t}}),e.fontSizes.forEach(function(t){i["FONTSIZE-"+t]={fontSize:t}}),e.fontFamilies.forEach(function(t){o["FONTFAMILY-"+t.name]={fontFamily:t.family}}),t({SUPERSCRIPT:{position:"relative",top:"-8px",fontSize:"11px"},SUBSCRIPT:{position:"relative",bottom:"-8px",fontSize:"11px"}},n,r,i,o)}}).call(this)}finally{}},function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return s[l]=r,u(l),l++}function i(t){delete s[t]}function o(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function a(t){if(c)setTimeout(a,0,t);else{var e=s[t];if(e){c=!0;try{o(e)}finally{i(t),c=!1}}}}if(!t.setImmediate){var u,l=1,s={},c=!1,f=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?function(){u=function(t){e.nextTick(function(){a(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&a(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),u=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){a(t.data)},u=function(e){t.port2.postMessage(e)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var t=f.documentElement;u=function(e){var n=f.createElement("script");n.onreadystatechange=function(){a(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():function(){u=function(t){setTimeout(a,0,t)}}(),h.setImmediate=r,h.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(59),n(35))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n}])});